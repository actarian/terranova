/**
 * @license more v1.0.0
 * (c) 2021 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["rxcomp","rxjs","rxjs/operators"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rxcomp,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var s={Clients:"clients",Group:"group",Suite:"suite",Tabs:"tabs",TextCenter:"textCenter",TextGraph:"textGraph",TextLeft:"textLeft",TextMap:"textMap",TextRight:"textRight",TextTwoCols:"textTwoCols",Welcome:"welcome"},u=[{id:1,template:s.Welcome,name:"Welcome"},{id:2,template:s.Group,name:"Chi Siamo",items:[{id:21,template:s.TextCenter,name:"Chi Siamo",title:"Chi Siamo"},{id:22,template:s.TextLeft,name:"Core Values",title:"Core Values",abstract:"<p>I nostri Core Value tramandano la nostra cultura e definiscono il carattere della nostra Azienda.</p><p>Ogni giorno guidano il modo in cui ci comportiamo e con cui prendiamo decisioni.</p>",image:"img/slides/slide-2-1.jpg",list:[{title:"Tenacia"},{title:"Centralità della Persona"},{title:"Integrità"},{title:"Qualità del Prodotto"},{title:"Responsabilità"}]},{id:23,template:s.TextCenter,name:"La nostra mission",title:"La nostra mission",abstract:"Aiutare i nostri Clienti con Soluzioni di elevata qualità, che superino gli standard di mercato e creino valore nel tempo.",image:"img/slides/slide-2-2.jpg"},{id:24,template:s.TextCenter,name:"La nostra vision",title:"La nostra vision",abstract:"Diventare uno dei Leader del mercato, fornendo prodotti flessibili e integrati che anticipano le esigenze dei nostri Clienti sfruttando lo straordinario know how delle nostre persone.",image:"img/slides/slide-2-3.jpg"},{id:25,template:s.TextGraph,name:"Persone",title:"Persone",abstract:"Il nostro Presente ed il nostro Futuro.",description:"<p>330 risorse in 10 sedi lavorano insieme per sviluppare e migliorare il prodotto leader per le aziende di Distribuzione e Vendita di Gas ed Energia Elettrica, per il Servizio Idrico, per l’Ambiente e in progetti di Smart Network.</p><p>248 area tecnica funzionale.</p><p>82 management e staff.</p>",graph:{format:"%",url:"data/persone.csv"}},{id:26,template:s.TextGraph,name:"Fatturato",title:"La crescita",abstract:"Negli ultimi anni, Terranova ha avuto una crescita costante sia in fatturato che in numero di risorse.",description:"<p>Fatturato di oltre € 41 milioni<br>con Ambiente.it e Arcoda per l’anno fiscale 2020.</p>",graph:{format:"%M",url:"data/fatturato.csv"}},{id:27,template:s.TextMap,name:"Le Sedi",title:"Le Sedi",abstract:"Presenti in Italia, Cina, Regno Unito e Uzbekistan.",image:"img/maps/eurasia.png",pins:[{x:9.84375,y:36.58823529,title:"Regno Unito",abstract:"Birmingham"},{x:19.47916667,y:47.52941176,title:"Italia",abstract:"HQ Firenze<br>Grosseto, Milano, Verona, Roma, Trento, Mestre"},{x:47.03125,y:41.17647059,title:"Uzbekistan",abstract:"Tashkent"},{x:86.82291667,y:50.70588235,title:"China",abstract:"Shangai"}]},{id:28,template:s.TextRight,name:"obiettivi futuri",title:"obiettivi futuri",abstract:"Continuo sviluppo della competenza multidisciplinare, del supporto normativo e l’automazione e digitalizzazione dei processi.",description:"<p>Gli obiettivi sono fornire al mercato soluzioni software complete (end to end) dedicate al mercato della Distribuzione (quali la Misura, lo Smart Metering, il Settlement, la Work Force Management, attività di Back Office) e della Vendita.</p><p>Nuovi investimenti in tecnologie per lo sviluppo di progetti di Smart Metering, Smart Grid e Smart City.</p>",image:"img/slides/slide-2-7.jpg",list:[{title:"Misura"},{title:"Settlement"},{title:"Work force Management"},{title:"Crm & Billing"},{title:"Smart Metering"},{title:"Smart grid"},{title:"Smart City"}]}]},{id:3,template:s.Group,name:"I Partner",items:[{id:31,template:s.TextCenter,name:"I partner",title:"I partner"},{id:32,template:s.TextMap,name:"Pietro Fiorentini",logo:"img/loghi/partners/pietro-fiorentini.png",title:"È partner di Terranova dal 2011",abstract:"385€ Millioni di fatturato 74€ Millioni EBITDA.",image:"img/maps/world.png",pins:[]},{id:32,template:s.TextCenter,name:"Arcoda",title:"Terranova è partner di Arcoda",abstract:"di cui detiene il 60% del capitale",logo:"img/loghi/partners/arcoda.png",description:"Arcoda sviluppa soluzioni tecnologiche vincenti, progettate per chi è chiamato a gestire quotidianamente forza lavoro sul territorio.",list:[{title:"Tenacia"}]},{id:32,template:s.TextCenter,name:"Ambiente.it",title:"Terranova è partner di Ambiente.it",abstract:"di cui detiene il 60% del capitale",logo:"img/loghi/partners/ambiente.it.png",description:"<p>Ambiente.it da quasi trent’anni sviluppa software gestionali ed eroga servizi professionali per la filiera dei rifiuti speciali e urbani.</p><p>Si propone al mercato con un servizio completo per la informatizzazione gestionale di tutte le problematiche ambientali, offrendo ai propri clienti soluzioni software, informazione, formazione, consulenza e assistenza.</p><p>Ambiente.it supporta oltre mille clienti in tutta Italia; è presente in grandi realtà industriali così come nei Consorzi e nelle Utility di igiene urbana, ed in centinaia di medie e piccole imprese in tutta Italia, con migliaia di utenti che utilizzano giornalmente i suoi software.</p>",list:[{title:"Tenacia"}]}]},{id:4,template:s.Group,name:"Soluzioni",items:[{id:41,template:s.TextCenter,name:"Soluzioni",title:"Soluzioni"},{id:42,template:s.Tabs,name:"Distribuzione",items:[{id:421,template:s.TextLeft,name:"Distribuzione",title:"Distribuzione",abstract:"Il settore storico di Terranova, che la vede primeggiare a livello internazionale con un’importante quota di mercato.",description:"Negli ultimi anni, inoltre, Terranova ha investito ingenti risorse nello sviluppo di soluzioni a supporto dell’area operations, delle attività di manutenzione, della cartografia e dell’automazione delle squadre di lavoro (Work Force Automation)."},{id:422,template:s.Suite,name:"Suite Reti",title:"Suite Reti",suite:{title:"Suite<b>Reti</b>",logo:"img/logos/suite-reti-1.png",items:[{x:.2,y:.2,color:"#0f53a1",title:"Reti<b>Acqua</b>",logo:"img/logos/suite-reti-1-1.png"},{x:.2,y:.4,color:"#724b7b",title:"Reti<b>Wfa</b>",logo:"img/logos/suite-reti-1-2.png"},{x:.2,y:.6,color:"#e31d2b",title:"Reti<b>Energia</b>",logo:"img/logos/suite-reti-1-3.png"},{x:.2,y:.8,color:"#d43b2d",title:"Reti<b>Idm</b>",logo:"img/logos/suite-reti-1-3.png"},{x:.8,y:.2,color:"#5abdeb",title:"Reti<b>Gas</b>",logo:"img/logos/suite-reti-1-3.png"},{x:.8,y:.4,color:"#94d4d4",title:"Reti<b>Cdm</b>",logo:"img/logos/suite-reti-1-3.png"},{x:.8,y:.6,color:"#a4cd4b",title:"Reti<b>Bi</b>",logo:"img/logos/suite-reti-1-3.png"},{x:.8,y:.8,color:"#c5af32",title:"Reti<b>Map</b>",logo:"img/logos/suite-reti-1-3.png"}]}},{id:423,template:s.Clients,name:"Clienti",title:"Clienti",abstract:"Le nostre referenze",clients:[{title:"Acsm Agam",logo:"img/suite/reti/clienti/acsm agam.png"},{title:"Adrigas",logo:"img/suite/reti/clienti/adrigas.png"},{title:"Aemme Linea Distribuzione",logo:"img/suite/reti/clienti/aemme-linea-distribuzione.png"},{title:"Amag Reti Gas",logo:"img/suite/reti/clienti/amag reti gas.png"},{title:"Amc",logo:"img/suite/reti/clienti/amc.png"},{title:"AP Reti Gas Nordest",logo:"img/suite/reti/clienti/ap reti gas nordest.png"},{title:"AP Reti Gas Rovigo",logo:"img/suite/reti/clienti/ap reti gas rovigo.png"},{title:"AP Reti Gas Vicenza",logo:"img/suite/reti/clienti/ap reti gas vicenza.png"},{title:"AP Reti Gas",logo:"img/suite/reti/clienti/ap reti gas.png"},{title:"Aquamet",logo:"img/suite/reti/clienti/aquamet.png"},{title:"Asm Vigevano",logo:"img/suite/reti/clienti/asm vigevano.png"},{title:"Asmt",logo:"img/suite/reti/clienti/asmt.png"},{title:"Atr",logo:"img/suite/reti/clienti/atr.png"},{title:"Azienda Energetica Valtellina Valchiavenna",logo:"img/suite/reti/clienti/azienda energetica valtellina valchiavenna.png"},{title:"Blu Reti Gas",logo:"img/suite/reti/clienti/blu reti gas.png"},{title:"Cbl Distribuzione Srl",logo:"img/suite/reti/clienti/cbl distribuzione srl.png"},{title:"Centria Reti Gas",logo:"img/suite/reti/clienti/centria reti gas.png"},{title:"Cosvim",logo:"img/suite/reti/clienti/cosvim.png"},{title:"Cps",logo:"img/suite/reti/clienti/cps.png"},{title:"Dea Distribuzione Elettrica Adriatica",logo:"img/suite/reti/clienti/dea distribuzione elettrica adriatica.png"},{title:"Dgn",logo:"img/suite/reti/clienti/dgn.png"},{title:"E-Dyna",logo:"img/suite/reti/clienti/e-dyna.png"},{title:"E",logo:"img/suite/reti/clienti/e.png"},{title:"Edilgas",logo:"img/suite/reti/clienti/edilgas.png"},{title:"Edma Reti Gas",logo:"img/suite/reti/clienti/edma reti gas.png"},{title:"Gei",logo:"img/suite/reti/clienti/gei.png"},{title:"Gigas Rete",logo:"img/suite/reti/clienti/gigas rete.png"},{title:"Gp Infrastrutture",logo:"img/suite/reti/clienti/gp infrastrutture.png"},{title:"Gruppo Erogasmet",logo:"img/suite/reti/clienti/gruppo erogasmet.png"},{title:"Gruppo Gesam",logo:"img/suite/reti/clienti/gruppo gesam.png"},{title:"Infrastrutture Distribuzione Gas",logo:"img/suite/reti/clienti/infrastrutture distribuzione gas.png"},{title:"IReti",logo:"img/suite/reti/clienti/ireti.png"},{title:"Linea Ri",logo:"img/suite/reti/clienti/linea ri.png"},{title:"M Reti",logo:"img/suite/reti/clienti/m reti.png"},{title:"Mediterranea",logo:"img/suite/reti/clienti/mediterranea.png"},{title:"Megareti",logo:"img/suite/reti/clienti/megareti.png"},{title:"Meta Edil",logo:"img/suite/reti/clienti/meta edil.png"},{title:"Mn",logo:"img/suite/reti/clienti/mn.png"},{title:"Pescara Distribuzione Gas",logo:"img/suite/reti/clienti/pescara distribuzione gas.png"},{title:"Prealpi Gas",logo:"img/suite/reti/clienti/prealpi gas.png"},{title:"Reti Distribuzione",logo:"img/suite/reti/clienti/reti distribuzione.png"},{title:"Reti Metano Territorio",logo:"img/suite/reti/clienti/reti metano territorio.png"},{title:"Reti Più",logo:"img/suite/reti/clienti/reti-più.png"},{title:"Salerno Energia Holding",logo:"img/suite/reti/clienti/salerno energia holding.png"},{title:"Sar",logo:"img/suite/reti/clienti/sar.png"},{title:"Società Impianti Metano",logo:"img/suite/reti/clienti/società impianti metano.png"},{title:"Stadtwerke Asm",logo:"img/suite/reti/clienti/stadtwerke asm.png"},{title:"Tea Sei",logo:"img/suite/reti/clienti/tea sei.png"},{title:"Tecniconsul",logo:"img/suite/reti/clienti/tecni consul.png"}]}]},{id:43,template:s.Tabs,name:"Smart Network",items:[{id:431,template:s.TextTwoCols,name:"Smart Network",title:"Smart Network",abstract:"Attraverso l’utilizzo congiunto di varie tecnologie, Terranova offre alle aziende di distribuzione uno strumento completo che supporti tutti i processi connessi allo <b>Smart Metering</b> e <b>Smart Grid</b>.",description:"<p>Da quelle imposte o incentivate dalla costante regolamentazione dell’Autorità di settore a quelle di gestione dell’infrastruttura, dei dispositivi e dei dati.</p><p>Dopo una prima fase in cui ha supportato la propria clientela nell’implementazione di progetti di Smart Metering nei settori gas, acqua ed elettrico Terranova adesso è pronta ad affrontare la nuova sfida dello Smart Metering di seconda generazione in avvio nel settore elettrico.</p><p>In ambito Smart Grid sono state sviluppate soluzioni per i settori gas ed acqua per la digitalizzazione della rete finalizzata all’efficienza operativa e alla sostenibilità ambientale.</p><p>Negli ultimi anni, inoltre, Terranova ha investito ingenti risorse nello sviluppo di soluzioni a supporto dell’area operations, delle attività di manutenzione, della cartografia e dell’automazione delle squadre di lavoro (Work Force Automation).</p>"},{id:432,template:s.Suite,name:"Suite Smart Network",title:"Suite Smart Network",suite:{title:"T<b>SN</b>",items:[{x:.3,y:.2,color:"#0f53a1",title:"T<b>SG</b>",abstract:"La soluzione per la gestione delle smart grid"},{x:.3,y:.4,color:"#724b7b",title:"T<b>PS</b>",abstract:"La soluzione per la gestione del prepagamento"},{x:.3,y:.6,color:"#e31d2b",title:"T<b>AMM</b>",abstract:"La soluzione per la telelettura e telegestione degli smart meter"},{x:.3,y:.8,color:"#5abdeb",title:"T<b>WFM</b>",abstract:"La soluzione per l’automazione delle squadre"},{x:.7,y:.2,color:"#94d4d4",title:"Mbus<b>Library</b>"},{x:.7,y:.3,color:"#94d4d4",title:"Sml<b>Library</b>"},{x:.7,y:.4,color:"#94d4d4",title:"Dlms<b>Library</b>",abstract:"La soluzione smart per implementare i protocolli di comunicazione"},{x:.7,y:.6,color:"#a4cd4b",title:"T<b>SL</b>",abstract:"La soluzione smart per l’illuminazione pubblica"},{x:.7,y:.8,color:"#a4cd4b",title:"T<b>AMM Mobile</b>",abstract:"La soluzione per la gestione on site degli smart meter"}]}}]},{id:44,template:s.Tabs,name:"Vendita",items:[{id:441,template:s.TextLeft,name:"Vendita",title:"Vendita",abstract:"Terranova supporta società di Vendita, retail ed i grossisti, con una soluzione completa per CRM e Billing.",description:"La nostra suite per il Mercato della Vendita ha un obiettivo chiaro e concreto: individuare sempre nuove soluzioni e strumenti digitali per consentire ai nostri Clienti di differenziarsi dai propri competitors. Una condizione necessaria per rispondere alle dinamiche di un mercato in movimento continuo."},{id:442,template:s.Suite,name:"Suite per la vendita",title:"Suite per la vendita",suite:{title:"4<b>Utility</b>",items:[{x:.3,y:.2,color:"#0f53a1",title:"Customer<b>Next</b>"},{x:.3,y:.35,color:"#724b7b",title:"<b>Trimp</b>"},{x:.3,y:.5,color:"#e31d2b",title:"<b>Payments</b>"},{x:.3,y:.65,color:"#5abdeb",title:"TC2<b>Next</b>"},{x:.3,y:.8,color:"#5abdeb",title:"Partner<b>Next</b>"},{x:.7,y:.2,color:"#94d4d4",title:"Datamax<b>Next</b>"},{x:.7,y:.35,color:"#a4cd4b",title:"<b>Lybra</b>"},{x:.7,y:.5,color:"#a4cd4b",title:"<b>Bit</b>"},{x:.7,y:.65,color:"#a4cd4b",title:"4<b>Cash</b>"},{x:.7,y:.8,color:"#a4cd4b",title:"Reseller<b>Next</b>"}]}}]},{id:45,template:s.Tabs,name:"Settore Idrico",items:[{id:451,template:s.TextLeft,name:"Settore Idrico",title:"Settore Idrico",abstract:"La soluzione per gli operatori del Settore Idrico per soddisfare le necessità di efficienza e supporto simultaneo dei processi di Distribuzione e di Vendita di acqua.",list:[{title:"Completezza e specializzazione"},{title:"Efficienza operativa"},{title:"Efficacia tecnica"},{title:"Compliancy"},{title:"Flessibilità ed adattabilità"},{title:"Attenzione per l’utente"}]},{id:452,template:s.Suite,name:"Reti Acqua",title:"Reti Acqua",suite:{title:"Reti<b>Acqua</b>",items:[{x:.3,y:.2,color:"#0f53a1",title:"Reti<b>Channel</b>"},{x:.3,y:.4,color:"#724b7b",title:"Reti<b>Bi</b>"},{x:.3,y:.6,color:"#e31d2b",title:"Reti<b>Wfa</b>"},{x:.7,y:.2,color:"#5abdeb",title:"Reti<b>Amm</b>"},{x:.7,y:.4,color:"#5abdeb",title:"Reti<b>Amm Mobile</b>"},{x:.7,y:.6,color:"#94d4d4",title:"Reti<b>SmartGrid</b>"},{x:.7,y:.8,color:"#a4cd4b",title:"Reti<b>Map</b>"}]}}]},{id:46,template:s.Tabs,name:"Gestione Ambientale",items:[{id:461,template:s.TextLeft,name:"Gestione Ambientale",title:"Gestione Ambientale",abstract:"Una gamma completa di soluzioni software per soddisfare le esigenze di tutta la filiera della gestione dei rifiuti.",description:"<p>La suite ECOS è una collana di moduli software, sempre aggiornati secondo le normative vigenti, progettata per l’informatizzazione dei processi gestionali di tutte le aziende della filiera ambientale.</p>"},{id:462,template:s.Suite,name:"La Suite Ecos",title:"La Suite Ecos",suite:{title:"Suite<b>Ecos</b>",items:[{x:.3,y:.2,color:"#0f53a1",title:"<b>Commerciale Amministratico e Fatturazione</b>"},{x:.3,y:.35,color:"#724b7b",title:"<b>Logistica</b>"},{x:.3,y:.5,color:"#e31d2b",title:"<b>Sicurezza e Tools</b>"},{x:.3,y:.65,color:"#5abdeb",title:"<b>Digitalizzazione</b>"},{x:.3,y:.8,color:"#94d4d4",title:"<b>Movimentazione e Automazione Impianti</b>"},{x:.7,y:.2,color:"#94d4d4",title:"<b>Tariffa</b>"},{x:.7,y:.35,color:"#94d4d4",title:"<b>Crm</b>"},{x:.7,y:.5,color:"#a4cd4b",title:"<b>Verticali</b>"},{x:.7,y:.65,color:"#a4cd4b",title:"<b>Web</b>"},{x:.7,y:.8,color:"#a4cd4b",title:"<b>Highlights</b>"}]}}]}]},{id:5,template:s.TextMap,name:"Clienti",title:"Clienti",abstract:"I nostri principali Clienti nel Mondo",image:"img/maps/world.png",pinMode:"over",pins:[{x:49.47916667,y:21.75,title:"Ace Gas",logo:"img/loghi/clients/acegas.png"},{x:43.02083333,y:25,title:"Aclara",logo:"img/loghi/clients/aclara.png"},{x:52.29166667,y:23.625,title:"Aem",logo:"img/loghi/clients/aem.png"},{x:47.70833333,y:24.125,title:"Centria Gas",logo:"img/loghi/clients/centria-gas.png"},{x:44.32291667,y:18.875,title:"Data Communication Company",logo:"img/loghi/clients/data-communication-company.png"},{x:47.65625,y:18.875,title:"Devolo Network",logo:"img/loghi/clients/devolo-network.png"},{x:77.55208333,y:50.375,title:"Edmi",logo:"img/loghi/clients/edmi.png"},{x:48.33333333,y:25,title:"Enel",logo:"img/loghi/clients/enel.png"},{x:47.5,y:22.75,title:"Erogasmet",logo:"img/loghi/clients/erogasmet.png"},{x:50.83333333,y:18,title:"Eso",logo:"img/loghi/clients/eso.png"},{x:49.63541667,y:25.875,title:"Gas Rete",logo:"img/loghi/clients/gas-rete.png"},{x:46.04166667,y:20.625,title:"Grdf",logo:"img/loghi/clients/grdf.png"},{x:79.16666667,y:34.5,title:"Holley",logo:"img/loghi/clients/holley.png"},{x:61.51041667,y:27.5,title:"Hudugazta Minot",logo:"img/loghi/clients/hudugazta-minot.png"},{x:48.22916667,y:20.875,title:"Infrastrutture Distribuzione Gas",logo:"img/loghi/clients/infrastrutture-distribuzione-gas.png"},{x:46.40625,y:23.625,title:"IReti",logo:"img/loghi/clients/ireti.png"},{x:55.10416667,y:27.125,title:"Kohler",logo:"img/loghi/clients/kohler.png"},{x:43.64583333,y:18.375,title:"Landis Gyr",logo:"img/loghi/clients/landis-gyr.png"},{x:48.54166667,y:22,title:"Megareti",logo:"img/loghi/clients/megareti.png"},{x:23.22916667,y:70,title:"Metrogas",logo:"img/loghi/clients/metrogas.png"},{x:42.1875,y:26.625,title:"Naturgy",logo:"img/loghi/clients/naturgy.png"},{x:47.13541667,y:23.25,title:"RetiPiù",logo:"img/loghi/clients/retipiu.png"},{x:80.52083333,y:33.375,title:"Shangai Fiorentini",logo:"img/loghi/clients/shangai-fiorentini.png"},{x:53.4375,y:22.375,title:"Texnopark",logo:"img/loghi/clients/texnopark.png"},{x:44.89583333,y:19.75,title:"Toshiba",logo:"img/loghi/clients/toshiba.png"},{x:81.40625,y:32.375,title:"XXX",logo:"img/loghi/clients/xxx.png"},{x:79.16666667,y:27.125,title:"YYY",logo:"img/loghi/clients/yyy.png"}]}],l=function(){function t(){}return t.has=function(t){return new URLSearchParams(window.location.search).has(t)},t.get=function(t){return new URLSearchParams(window.location.search).get(t)},t.set=function(t,e){var n=new URLSearchParams(window.location.search);"string"==typeof t?n.set(t,e):n.set(t,""),this.pushState(n)},t.pushState=function(t,e){if(window.history&&window.history.pushState){var n=document.title,i=""+window.location.origin+window.location.pathname+(t?"?"+t.toString():"")+(e?"#"+e:""),r=t?t.toString():e?{slug:e}:null;window.history.pushState(r,n,i),console.log("pushState",t,e,r,n,i)}},t.replaceState=function(t,e){if(window.history&&window.history.replaceState){var n=document.title,i=""+window.location.origin+window.location.pathname+(t?"?"+t.toString():"")+(e?"#"+e:""),r=t?t.toString():e?{slug:e}:null;window.history.replaceState(r,n,i)}},t.deserialize=function(t){var e=this.get("params");return this.decode(t,e)},t.serialize=function(t,e){var n=this.deserialize(),i=this.encode(t,e,n);this.set("params",i)},t.decode=function(t,e){var n=null;if(e){var i=window.atob(e);n=JSON.parse(i)}return t&&n&&(n=n[t]),n||null},t.encode=function(t,e,n){n=n||{};"string"==typeof t?n[t]=e:n=t;var i=JSON.stringify(n);return window.btoa(i)},t.toSlug=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},t.onPopState=function(t){return function(t){window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href),t()}}(t)},t}(),c=function(){function t(){}return t.data$=function(){var t=this;return e.of(u).pipe(n.map((function(e){return t.setSlugs(e)})))},t.setSlugs=function(t,e,n,i){var r=this;return void 0===e&&(e=""),void 0===n&&(n=""),void 0===i&&(i=""),t.forEach((function(t){t.path=(""!==e?e+"-":"")+l.toSlug(t.name),t.slug=n+"/"+t.path,t.documentTitle=i+(""!==i?" - ":"")+t.name,t.items&&r.setSlugs(t.items,t.path,t.slug,t.documentTitle)})),t},t}(),f=function(){function t(){}return t.keydown$=function(){return this.keydown$_||(this.keydown$_=e.fromEvent(window,"keydown").pipe(n.shareReplay(1))),this.keydown$_},t.keyup$=function(){return this.keyup$_||(this.keyup$_=e.fromEvent(window,"keyup").pipe(n.shareReplay(1))),this.keyup$_},t.keys$=function(){var t=this;return this.keys$_||(this.keys$_=e.merge(this.keydown$(),this.keyup$()).pipe(n.map((function(e){var n=t.keys;return n.originalEvent=e,"keydown"===e.type?n[e.code]=!0:delete n[e.code],t.keys})),n.startWith(this.keys),n.shareReplay(1))),this.keys$_},t.key$=function(){if(!this.key$_){var t=/\w/;this.key$_=this.keydown$().pipe(n.filter((function(e){return e.key&&e.key.match(t)})),n.map((function(t){return t.key})),n.shareReplay(1))}return this.key$_},t.typing$=function(){if(!this.typing$_){var t,e="";this.typing$_=this.key$().pipe(n.map((function(n){return t&&clearTimeout(t),e+=n,t=setTimeout((function(){e=""}),1500),e})),n.shareReplay(1))}return this.typing$_},t}();a(f,"keys",{});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var h=function(){return(h=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},d=function(){return(d=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},p=function(t){return void 0===t&&(t={}),{arrayFormat:t.arrayFormat||"none",booleanFormat:t.booleanFormat||"none",nullFormat:t.nullFormat||"default"}},m=function(t){return encodeURIComponent(t)},g=function(t){return decodeURIComponent(t)},v=function(t,e,n){return null===e?function(t,e){return"hidden"===e.nullFormat?"":"string"===e.nullFormat?t+"=null":t}(t,n):"boolean"==typeof e?function(t,e,n){return"empty-true"===n.booleanFormat&&e?t:t+"="+("unicode"===n.booleanFormat?e?"✓":"✗":e.toString())}(t,e,n):Array.isArray(e)?function(t,e,n){var i=function(t){return"index"===t.arrayFormat?function(t,e){return t+"["+e+"]"}:"brackets"===t.arrayFormat?function(t){return t+"[]"}:function(t){return t}}(n);return e.map((function(e,n){return i(t,n)+"="+m(e)})).join("&")}(t,e,n):t+"="+m(e)},y=function(t){var e=t.indexOf("?");return-1===e?t:t.slice(e+1)},b=function(t){var e=t.indexOf("["),n=-1!==e;return{hasBrackets:n,name:n?t.slice(0,e):t}},w=function(t,e){var n=p(e);return y(t).split("&").reduce((function(t,e){var i=e.split("="),r=i[0],a=i[1],o=b(r),s=o.hasBrackets,u=o.name,l=t[u],c=function(t,e){if(void 0===t)return"empty-true"===e.booleanFormat||null;if("string"===e.booleanFormat){if("true"===t)return!0;if("false"===t)return!1}if("unicode"===e.booleanFormat){if("✓"===g(t))return!0;if("✗"===g(t))return!1}return"string"===e.nullFormat&&"null"===t?null:g(t)}(a,n);return t[u]=void 0===l?s?[c]:c:(Array.isArray(l)?l:[l]).concat(c),t}),{})},x=function(t,e){var n=p(e);return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return v(e,t[e],n)})).filter(Boolean).join("&")},_=/[^!$'()*+,;|:]/g,S=function(t){return t.replace(_,(function(t){return encodeURIComponent(t)}))},k={default:S,uri:encodeURI,uriComponent:encodeURIComponent,none:function(t){return t},legacy:encodeURI},M={default:decodeURIComponent,uri:decodeURI,uriComponent:decodeURIComponent,none:function(t){return t},legacy:decodeURIComponent},C=function(t,e,n){var i=k[e]||S;return n?String(t).split("/").map(i).join("/"):i(String(t))},T=function(t){return"("+(t?t.replace(/(^<|>$)/g,""):"[a-zA-Z0-9-_.~%':|=+\\*@$]+")+")"},A=[{name:"url-parameter",pattern:/^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(t){return new RegExp(T(t[2]))}},{name:"url-parameter-splat",pattern:/^\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,regex:/([^?]*)/},{name:"url-parameter-matrix",pattern:/^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(t){return new RegExp(";"+t[1]+"="+T(t[2]))}},{name:"query-parameter",pattern:/^(?:\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/},{name:"delimiter",pattern:/^(\/|\?)/,regex:function(t){return new RegExp("\\"+t[0])}},{name:"sub-delimiter",pattern:/^(!|&|-|_|\.|;)/,regex:function(t){return new RegExp(t[0])}},{name:"fragment",pattern:/^([0-9a-zA-Z]+)/,regex:function(t){return new RegExp(t[0])}}],E=function t(e,n){if(void 0===n&&(n=[]),!A.some((function(i){var r=e.match(i.pattern);return!!r&&(n.push({type:i.name,match:r[0],val:r.slice(1,2),otherVal:r.slice(2),regex:i.regex instanceof Function?i.regex(r):i.regex}),r[0].length<e.length&&(n=t(e.substr(r[0].length),n)),!0)})))throw new Error("Could not parse path '"+e+"'");return n},P=function(t){return null!=t},z={urlParamsEncoding:"default"},N=function(){function t(t,e){if(!t)throw new Error("Missing path in Path constructor");this.path=t,this.options=d(d({},z),e),this.tokens=E(t),this.hasUrlParams=this.tokens.filter((function(t){return/^url-parameter/.test(t.type)})).length>0,this.hasSpatParam=this.tokens.filter((function(t){return/splat$/.test(t.type)})).length>0,this.hasMatrixParams=this.tokens.filter((function(t){return/matrix$/.test(t.type)})).length>0,this.hasQueryParams=this.tokens.filter((function(t){return/^query-parameter/.test(t.type)})).length>0,this.spatParams=this.getParams("url-parameter-splat"),this.urlParams=this.getParams(/^url-parameter/),this.queryParams=this.getParams("query-parameter"),this.params=this.urlParams.concat(this.queryParams),this.source=this.tokens.filter((function(t){return void 0!==t.regex})).map((function(t){return t.regex.source})).join("")}return t.createPath=function(e,n){return new t(e,n)},t.prototype.isQueryParam=function(t){return-1!==this.queryParams.indexOf(t)},t.prototype.isSpatParam=function(t){return-1!==this.spatParams.indexOf(t)},t.prototype.test=function(t,e){var n=this,i=d(d({caseSensitive:!1,strictTrailingSlash:!1},this.options),e),r=function(t,e){return e||"\\/"===t?t:t.replace(/\\\/$/,"")+"(?:\\/)?"}(this.source,i.strictTrailingSlash),a=this.urlTest(t,r+(this.hasQueryParams?"(\\?.*$|$)":"$"),i.caseSensitive,i.urlParamsEncoding);if(!a||!this.hasQueryParams)return a;var o=w(t,i.queryParams);return 0===Object.keys(o).filter((function(t){return!n.isQueryParam(t)})).length?(Object.keys(o).forEach((function(t){return a[t]=o[t]})),a):null},t.prototype.partialTest=function(t,e){var n=this,i=d(d({caseSensitive:!1,delimited:!0},this.options),e),r=function(t,e){return e?/(\/)$/.test(t)?t:t+"(\\/|\\?|\\.|;|$)":t}(this.source,i.delimited),a=this.urlTest(t,r,i.caseSensitive,i.urlParamsEncoding);if(!a)return a;if(!this.hasQueryParams)return a;var o=w(t,i.queryParams);return Object.keys(o).filter((function(t){return n.isQueryParam(t)})).forEach((function(t){return function(t,e,n){void 0===n&&(n="");var i=t[e];return t[e]=void 0===i?n:Array.isArray(i)?i.concat(n):[i,n],t}(a,t,o[t])})),a},t.prototype.build=function(t,e){var n=this;void 0===t&&(t={});var i=d(d({ignoreConstraints:!1,ignoreSearch:!1,queryParams:{}},this.options),e),r=Object.keys(t).filter((function(t){return!n.isQueryParam(t)})).reduce((function(e,r){if(!P(t[r]))return e;var a=t[r],o=n.isSpatParam(r);return"boolean"==typeof a?e[r]=a:Array.isArray(a)?e[r]=a.map((function(t){return C(t,i.urlParamsEncoding,o)})):e[r]=C(a,i.urlParamsEncoding,o),e}),{});if(this.urlParams.some((function(e){return!P(t[e])}))){var a=this.urlParams.filter((function(e){return!P(t[e])}));throw new Error("Cannot build path: '"+this.path+"' requires missing parameters { "+a.join(", ")+" }")}if(!i.ignoreConstraints&&!this.tokens.filter((function(t){return/^url-parameter/.test(t.type)&&!/-splat$/.test(t.type)})).every((function(t){return new RegExp("^"+T(t.otherVal[0])+"$").test(r[t.val])})))throw new Error("Some parameters of '"+this.path+"' are of invalid format");var o=this.tokens.filter((function(t){return!1===/^query-parameter/.test(t.type)})).map((function(t){return"url-parameter-matrix"===t.type?";"+t.val+"="+r[t.val[0]]:/^url-parameter/.test(t.type)?r[t.val[0]]:t.match})).join("");if(i.ignoreSearch)return o;var s=this.queryParams.filter((function(e){return-1!==Object.keys(t).indexOf(e)})).reduce((function(e,n){return e[n]=t[n],e}),{}),u=x(s,i.queryParams);return u?o+"?"+u:o},t.prototype.getParams=function(t){var e=t instanceof RegExp?function(e){return t.test(e.type)}:function(e){return e.type===t};return this.tokens.filter(e).map((function(t){return t.val[0]}))},t.prototype.urlTest=function(t,e,n,i){var r=this,a=new RegExp("^"+e,n?"":"i"),o=t.match(a);return o?this.urlParams.length?o.slice(1,this.urlParams.length+1).reduce((function(t,e,n){return t[r.urlParams[n]]=(M[i]||decodeURIComponent)(e),t}),{}):{}:null},t}(),L=function(t){var e="";return t.reduce((function(t,n){var i,r,a,o,s=null!=(r=null===(i=n.parser)||void 0===i?void 0:i.urlParams.reduce((function(t,e){return t[e]="url",t}),{}))?r:{},u=null!=(o=null===(a=n.parser)||void 0===a?void 0:a.queryParams.reduce((function(t,e){return t[e]="query",t}),s))?o:{};return void 0!==n.name&&(t[e=e?e+"."+n.name:n.name]=u),t}),{})},$=function t(e,n,i,r,a){void 0===r&&(r={});for(var o=r.queryParamsMode,s=void 0===o?"default":o,u=r.strictTrailingSlash,l=void 0!==u&&u,c=r.strongMatching,f=void 0===c||c,h=r.caseSensitive,d=void 0!==h&&h,m=1===e.length&&""===e[0].name,g=function(e){var o,u=null,c=void 0,h=n;if("/"===a&&"/"===e.path&&(h="/"+n),e.children.length||(u=e.parser.test(h,{caseSensitive:d,strictTrailingSlash:l,queryParams:r.queryParams,urlParamsEncoding:r.urlParamsEncoding})),u||(u=e.parser.partialTest(h,{delimited:f,caseSensitive:d,queryParams:r.queryParams,urlParamsEncoding:r.urlParamsEncoding})),u){var g=e.parser.build(u,{ignoreSearch:!0,urlParamsEncoding:r.urlParamsEncoding});l||e.children.length||(g=g.replace(/\/$/,"")),c=0===h.toLowerCase().indexOf(g.toLowerCase())?h.slice(g.length):h,l||e.children.length||(c=c.replace(/^\/\?/,"?"));var v=function(t,e,n){var i=p(n);if(""===y(t))return{querystring:"",removedParams:{}};var r=t.split("&").reduce((function(t,n){var i=t[0],r=t[1],a=n.split("=")[0],o=b(a).name;return-1===e.indexOf(o)?[i.concat(n),r]:[i,r.concat(n)]}),[[],[]]),a=r[0],o=r[1];return{querystring:a.join("&"),removedParams:w(o.join("&"),i)}}((o=h.replace(g,""),o.split("?")[1]||""),e.parser.queryParams,r.queryParams).querystring;if(c=function(t){return t.split("?")[0]}(c)+(v?"?"+v:""),l||m||"/"!==c||/\/$/.test(g)||(c=""),i.segments.push(e),Object.keys(u).forEach((function(t){return i.params[t]=u[t]})),!m&&!c.length)return{value:i};if(!m&&"strict"!==s&&0===c.indexOf("?")){var x=w(c.slice(1),r.queryParams);return Object.keys(x).forEach((function(t){return i.params[t]=x[t]})),{value:i}}var _=e.getNonAbsoluteChildren();return _.length?{value:t(_,c,i,r,g)}:{value:null}}},v=0,x=e;v<x.length;v++){var _=g(x[v]);if("object"==typeof _)return _.value}return null};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R=function(t){return function(e,n){var i,r,a,o,s,u,l=e.path.replace(/<.*?>/g,"").split("?")[0].replace(/(.+)\/$/,"$1"),c=n.path.replace(/<.*?>/g,"").split("?")[0].replace(/(.+)\/$/,"$1");if("/"===l)return 1;if("/"===c)return-1;if(null===(i=e.parser)||void 0===i?void 0:i.hasSpatParam)return 1;if(null===(r=n.parser)||void 0===r?void 0:r.hasSpatParam)return-1;var f=(l.match(/\//g)||[]).length,h=(c.match(/\//g)||[]).length;if(f<h)return 1;if(f>h)return-1;var d=null!=(o=null===(a=e.parser)||void 0===a?void 0:a.urlParams.length)?o:0,p=null!=(u=null===(s=n.parser)||void 0===s?void 0:s.urlParams.length)?u:0;if(d<p)return-1;if(d>p)return 1;var m=(l.split("/").slice(-1)[0]||"").length,g=(c.split("/").slice(-1)[0]||"").length;return m<g?1:m>g?-1:t.indexOf(e)-t.indexOf(n)}},I=function(){function t(t,e,n,i){return void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n=[]),void 0===i&&(i={}),this.name=t,this.absolute=/^~/.test(e),this.path=this.absolute?e.slice(1):e,this.parser=this.path?new N(this.path):null,this.children=[],this.parent=i.parent,this.checkParents(),this.add(n,i.onAdd,!i.finalSort&&!1!==i.sort),i.finalSort&&this.sortDescendants(),this}return t.prototype.getParentSegments=function(t){return void 0===t&&(t=[]),this.parent&&this.parent.parser?this.parent.getParentSegments(t.concat(this.parent)):t.reverse()},t.prototype.setParent=function(t){this.parent=t,this.checkParents()},t.prototype.setPath=function(t){void 0===t&&(t=""),this.path=t,this.parser=t?new N(t):null},t.prototype.add=function(e,n,i){var r=this;if(void 0===i&&(i=!0),null==e)return this;if(e instanceof Array)return e.forEach((function(t){return r.add(t,n,i)})),this;if(!(e instanceof t||e instanceof Object))throw new Error("RouteNode.add() expects routes to be an Object or an instance of RouteNode.");if(e instanceof t)e.setParent(this),this.addRouteNode(e,i);else{if(!e.name||!e.path)throw new Error("RouteNode.add() expects routes to have a name and a path defined.");var a=new t(e.name,e.path,e.children,{finalSort:!1,onAdd:n,parent:this,sort:i}),o=a.getParentSegments([a]).map((function(t){return t.name})).join(".");n&&n(h(h({},e),{name:o})),this.addRouteNode(a,i)}return this},t.prototype.addNode=function(e,n){return this.add(new t(e,n)),this},t.prototype.getPath=function(t){var e,n=this.getSegmentsByName(t);return n?(e=n)?e.map((function(t){return t.path})).join(""):null:null},t.prototype.getNonAbsoluteChildren=function(){return this.children.filter((function(t){return!t.absolute}))},t.prototype.sortChildren=function(){this.children.length&&function(t){var e=t.slice(0);t.sort(R(e))}(this.children)},t.prototype.sortDescendants=function(){this.sortChildren(),this.children.forEach((function(t){return t.sortDescendants()}))},t.prototype.buildPath=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var i=this.getSegmentsByName(t);if(!i)throw new Error("[route-node][buildPath] '{routeName}' is not defined");return function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});for(var i=n.queryParamsMode,r=void 0===i?"default":i,a=n.trailingSlashMode,o=void 0===a?"default":a,s=[],u=[],l=0,c=t;l<c.length;l++){var f=c[l].parser;f&&(s.push.apply(s,f.queryParams),u.push.apply(u,f.urlParams),u.push.apply(u,f.spatParams))}if("loose"===r){var h=Object.keys(e).reduce((function(t,e){return-1===s.indexOf(e)&&-1===u.indexOf(e)?t.concat(e):t}),[]);s.push.apply(s,h)}var d=s.reduce((function(t,n){return-1!==Object.keys(e).indexOf(n)&&(t[n]=e[n]),t}),{}),p=x(d,n.queryParams),m=t.reduce((function(t,i){var r,a,o=null!=(a=null===(r=i.parser)||void 0===r?void 0:r.build(e,{ignoreSearch:!0,queryParams:n.queryParams,urlParamsEncoding:n.urlParamsEncoding}))?a:"";return i.absolute?o:t+o}),"").replace(/\/\/{1,}/g,"/"),g=m;return"always"===o?g=/\/$/.test(m)?m:m+"/":"never"===o&&"/"!==m&&(g=/\/$/.test(m)?m.slice(0,-1):m),g+(p?"?"+p:"")}(i,e,n)},t.prototype.buildState=function(t,e){void 0===e&&(e={});var n=this.getSegmentsByName(t);return n&&n.length?{name:t,params:e,meta:L(n)}:null},t.prototype.matchPath=function(t,e){void 0===e&&(e={}),""!==t||e.strictTrailingSlash||(t="/");var n=this.getSegmentsMatchingPath(t,e);if(!n)return null;var i=n.segments;if(i[0].absolute){var r=i[0].getParentSegments();i.reverse(),i.push.apply(i,r),i.reverse()}var a=i[i.length-1].findSlashChild();return a&&i.push(a),function(t){return t&&t.segments&&t.segments.length?{name:t.segments.map((function(t){return t.name})).filter((function(t){return t})).join("."),params:t.params,meta:L(t.segments)}:null}(n)},t.prototype.addRouteNode=function(t,e){void 0===e&&(e=!0);var n=t.name.split(".");if(1===n.length){if(-1!==this.children.map((function(t){return t.name})).indexOf(t.name))throw new Error('Alias "'+t.name+'" is already defined in route node');if(-1!==this.children.map((function(t){return t.path})).indexOf(t.path))throw new Error('Path "'+t.path+'" is already defined in route node');this.children.push(t),e&&this.sortChildren()}else{var i=this.getSegmentsByName(n.slice(0,-1).join("."));if(!i)throw new Error("Could not add route named '"+t.name+"', parent is missing.");t.name=n[n.length-1],i[i.length-1].add(t)}return this},t.prototype.checkParents=function(){if(this.absolute&&this.hasParentsParams())throw new Error("[RouteNode] A RouteNode with an abolute path cannot have parents with route parameters")},t.prototype.hasParentsParams=function(){if(this.parent&&this.parent.parser){var t=this.parent.parser;return t.hasUrlParams||t.hasSpatParam||t.hasMatrixParams||t.hasQueryParams||this.parent.hasParentsParams()}return!1},t.prototype.findAbsoluteChildren=function(){return this.children.reduce((function(t,e){return t.concat(e.absolute?e:[]).concat(e.findAbsoluteChildren())}),[])},t.prototype.findSlashChild=function(){return this.getNonAbsoluteChildren().filter((function(t){return t.parser&&/^\/(\?|$)/.test(t.parser.path)}))[0]},t.prototype.getSegmentsByName=function(t){var e=[],n=this.parser?[this]:this.children;return(this.parser?[""]:[]).concat(t.split(".")).every((function(t){var i=function(t,e){var n=e.filter((function(e){return e.name===t}));return n.length?n[0]:void 0}(t,n);return!!i&&(n=i.children,e.push(i),!0)}))?e:null},t.prototype.getSegmentsMatchingPath=function(t,e){var n=(this.parser?[this]:this.children).reduce((function(t,e){return t.concat(e,e.findAbsoluteChildren())}),[]),i=$(n,t,{segments:[],params:{}},e);return i&&1===i.segments.length&&""===i.segments[0].name?null:i},t}();var O=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),j=function(t){return t.split(".").reduce((function(t,e){return t.concat(t.length?t[t.length-1]+"."+e:e)}),[])},q=function(t){return t&&t.meta&&t.meta.params},F=function(t,e){return q(e)&&null!=e.meta.params[t]?Object.keys(e.meta.params[t]).reduce((function(t,n){return t[n]=e.params[n],t}),{}):{}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var D=function(){return(D=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},H={trailingSlashMode:"default",queryParamsMode:"default",strictTrailingSlash:!1,autoCleanUp:!0,allowNotFound:!1,strongMatching:!0,rewritePathOnMatch:!0,caseSensitive:!1,urlParamsEncoding:"default"};var U="NOT_STARTED",B="NO_START_PATH_OR_STATE",G="ALREADY_STARTED",V="ROUTE_NOT_FOUND",W="SAME_STATES",X="CANNOT_DEACTIVATE",Y="CANNOT_ACTIVATE",Q="TRANSITION_ERR",Z="CANCELLED",K="@@router5/UNKNOWN_ROUTE",J="$start",tt="$stop",et="$$start",nt="$$cancel",it="$$success",rt="$$error";function at(t){var e=0,n=null;return t.getState=function(){return n},t.setState=function(t){n=t},t.makeState=function(n,i,r,a,o){return{name:n,params:D(D({},t.config.defaultParams[n]),i),path:r,meta:a?D(D({},a),{id:void 0===o?++e:o}):void 0}},t.makeNotFoundState=function(e,n){return t.makeState(K,{path:e},e,{options:n})},t.areStatesEqual=function(e,n,i){if(void 0===i&&(i=!0),e.name!==n.name)return!1;var r=function(e){return t.rootNode.getSegmentsByName(e).map((function(t){return t.parser.urlParams})).reduce((function(t,e){return t.concat(e)}),[])},a=i?r(e.name):Object.keys(e.params),o=i?r(n.name):Object.keys(n.params);return a.length===o.length&&a.every((function(t){return e.params[t]===n.params[t]}))},t.areStatesDescendants=function(t,e){return!!new RegExp("^"+t.name+"\\.(.*)$").test(e.name)&&Object.keys(t.params).every((function(n){return t.params[n]===e.params[n]}))},t.forwardState=function(e,n){var i=t.config.forwardMap[e]||e;return{name:i,params:D(D(D({},t.config.defaultParams[e]),t.config.defaultParams[i]),n)}},t.buildState=function(e,n){var i=t.forwardState(e,n),r=i.name,a=i.params;return t.rootNode.buildState(r,a)},t}var ot={onStart:J,onStop:tt,onTransitionSuccess:it,onTransitionStart:et,onTransitionError:rt,onTransitionCancel:nt};function st(t){var e=[];function n(e){var n=t.executeFactory(e),i=Object.keys(ot).map((function(e){if(n[e])return t.addEventListener(ot[e],n[e])})).filter(Boolean);return function(){i.forEach((function(t){return t()})),n.teardown&&n.teardown()}}return t.getPlugins=function(){return e},t.usePlugin=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t.map((function(t){return e.push(t),n(t)}));return function(){e=e.filter((function(e){return-1===t.indexOf(e)})),r.forEach((function(t){return t()}))}},t}function ut(t){var e=[],n=[];return t.useMiddleware=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var a=i.map((function(i){var r=t.executeFactory(i);return e.push(i),n.push(r),function(){e=e.filter((function(t){return t!==i})),n=n.filter((function(t){return t!==r}))}}));return function(){return a.forEach((function(t){return t()}))}},t.clearMiddleware=function(){return e=[],n=[],t},t.getMiddlewareFactories=function(){return e},t.getMiddlewareFunctions=function(){return n},t}function lt(t){var e={};function n(e){var n="object"==typeof e,i=n?e.next.bind(e):e,r=t.addEventListener(it,(function(t,e){i({route:t,previousRoute:e})}));return n?{unsubscribe:r}:r}function i(){var t;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");return n(t)}})[O]=function(){return this},t}return t.invokeEventListeners=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e[t]||[]).forEach((function(t){return t.apply(void 0,n)}))},t.removeEventListener=function(t,n){e[t]=e[t].filter((function(t){return t!==n}))},t.addEventListener=function(n,i){return e[n]=(e[n]||[]).concat(i),function(){return t.removeEventListener(n,i)}},t.subscribe=n,t[O]=i,t["@@observable"]=i,t}function ct(t,e,n){var i=e.isCancelled,r=e.toState,a=e.fromState,o=e.errorKey,s=void 0===o?void 0:o,u=Array.isArray(t)?t:Object.keys(t),l=function(t){return"object"==typeof t&&void 0!==t.name&&void 0!==t.params&&void 0!==t.path},c=function(t,e,n,r){var o=function(t,e){t?r(t):e&&e!==n&&l(e)?(function(t,e){return e.name!==t.name||e.params!==t.params||e.path!==t.path}(e,n)&&console.error("[router5][transition] Warning: state values (name, params, path) were changed during transition process."),r(null,function(t,e){return D(D(D({},e),t),{meta:D(D({},e.meta),t.meta)})}(e,n))):r(null,n)},s=t.call(null,n,a,o);i()?o(null):"boolean"==typeof s?o(s?null:e):l(s)?o(null,s):s&&"function"==typeof s.then&&s.then((function(t){t instanceof Error?o({error:t},null):o(null,t)}),(function(t){t instanceof Error?(console.error(t.stack||t),o(D(D({},e),{promiseError:t}),null)):o("object"==typeof t?D(D({},e),t):e,null)}))},f=function(e,r){var a;if(i())n();else if(e)n(e);else if(u.length){var o="string"==typeof u[0],l=s&&o?((a={})[s]=u[0],a):{},h=o?t[u[0]]:u[0];u=u.slice(1),c(h,l,r,f)}else n(null,r)};f(null,r)}function ft(t,e,n,i,r){var a=!1,o=!1,s=t.getOptions(),u=t.getLifecycleFunctions(),l=u[0],c=u[1],f=t.getMiddlewareFunctions(),h=function(){return a},d=function(t,e){return D(D({},t),e instanceof Object?e:{error:e})},p=e.name===K,m={isCancelled:h,toState:e,fromState:n},g=function(t,e){var n,i=t.meta&&t.meta&&t.meta.options||{},r=e?j(e.name):[],a=j(t.name),o=Math.min(r.length,a.length);n=!e||i.reload?0:q(e)||q(t)?function(){var n,i=function(){var i=r[n],o=a[n];if(i!==o)return{value:n};var s=F(i,t),u=F(o,e);return Object.keys(s).length!==Object.keys(u).length?{value:n}:0===Object.keys(s).length?"continue":Object.keys(s).some((function(t){return u[t]!==s[t]}))?{value:n}:void 0};for(n=0;n<o;n+=1){var s=i();if("object"==typeof s)return s.value}return n}():0;var s=r.slice(n).reverse(),u=a.slice(n);return{intersection:e&&n>0?r[n-1]:"",toDeactivate:s,toActivate:u}}(e,n),v=g.toDeactivate,y=g.toActivate,b=!n||i.forceDeactivate?[]:function(t,e,n){ct(v.filter((function(t){return l[t]})).reduce((function(t,e){var n;return D(D({},t),((n={})[e]=l[e],n))}),{}),D(D({},m),{errorKey:"segment"}),(function(t){return n(t?d({code:X},t):null)}))},w=p?[]:function(t,e,n){ct(y.filter((function(t){return c[t]})).reduce((function(t,e){var n;return D(D({},t),((n={})[e]=c[e],n))}),{}),D(D({},m),{errorKey:"segment"}),(function(t){return n(t?d({code:Y},t):null)}))},x=f.length?function(t,e,n){return ct(f,D({},m),(function(e,i){return n(e?d({code:Q},e):null,i||t)}))}:[];return ct([].concat(b).concat(w).concat(x),m,(function(n,i){if(o=!0,!h()){if(!n&&s.autoCleanUp){var a=j(e.name);Object.keys(l).forEach((function(e){-1===a.indexOf(e)&&t.clearCanDeactivate(e)}))}r(n,i||e)}})),function(){a||o||(a=!0,r({code:Z},null))}}var ht=function(){};function dt(t){var e;function n(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=e[0],a=e[e.length-1],o="function"==typeof a?a:ht,s="object"==typeof e[1]?e[1]:{},u="object"==typeof e[2]?e[2]:{};if(t.isStarted()){var l=t.buildState(r,s);if(!l)return o(c={code:V}),void t.invokeEventListeners(rt,null,t.getState(),c);var c,f=t.makeState(l.name,l.params,t.buildPath(l.name,l.params),{params:l.meta,options:u}),h=!!t.getState()&&t.areStatesEqual(t.getState(),f,!1);if(h&&!u.reload&&!u.force)return o(c={code:W}),void t.invokeEventListeners(rt,f,t.getState(),c);var d=t.getState();return u.skipTransition?(o(null,f),ht):t.transitionToState(f,d,u,(function(e,i){if(e)if(e.redirect){var r=e.redirect;n(r.name,r.params,D(D({},u),{force:!0,redirected:!0}),o)}else o(e);else t.invokeEventListeners(it,i,d,u),o(null,i)}))}o({code:U})}return t.navigate=n,t.navigate=n,t.navigateToDefault=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r="object"==typeof e[0]?e[0]:{},a=2===e.length?e[1]:"function"==typeof e[0]?e[0]:ht,o=t.getOptions();return o.defaultRoute?n(o.defaultRoute,o.defaultParams,r,a):function(){}},t.cancel=function(){return e&&(e("navigate"),e=null),t},t.transitionToState=function(n,i,r,a){return void 0===r&&(r={}),void 0===a&&(a=ht),t.cancel(),t.invokeEventListeners(et,n,i),e=ft(t,n,i,r,(function(r,o){e=null,o=o||n,r?(r.code===Z?t.invokeEventListeners(nt,n,i):t.invokeEventListeners(rt,n,i,r),a(r)):(t.setState(o),a(null,o))}))},t}var pt=function(){};function mt(t){var e=!1;return t.isStarted=function(){return e},t.start=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r,a,o=t.getOptions(),s=n[n.length-1],u="function"==typeof s?s:pt,l="function"!=typeof n[0]?n[0]:void 0;if(e)return u({code:G}),t;e=!0,t.invokeEventListeners(J);var c=function(e,n,i){void 0===i&&(i=!0),e||t.invokeEventListeners(it,n,null,{replace:!0}),e&&i&&t.invokeEventListeners(rt,n,null,e),u(e,n)};if(void 0===l&&!o.defaultRoute)return c({code:B});if("string"==typeof l?r=l:"object"==typeof l&&(a=l),a)t.setState(a),c(null,a);else{a=void 0===r?null:t.matchPath(r);var f=function(){return t.navigateToDefault({replace:!0},u)},h=function(e){return t.navigate(e.name,e.params,{replace:!0,reload:!0,redirected:!0},u)},d=function(e){t.transitionToState(e,t.getState(),{},(function(t,e){t?t.redirect?h(t.redirect):o.defaultRoute?f():c(t,null,!1):c(null,e)}))};a?d(a):o.defaultRoute?f():o.allowNotFound?d(t.makeNotFoundState(r,{replace:!0})):c({code:V,path:r},null)}return t},t.stop=function(){return e&&(t.setState(null),e=!1,t.invokeEventListeners(tt)),t},t}var gt=function(t){return"function"==typeof t?t:function(){return function(){return t}}};function vt(t){var e={},n={},i={},r={};return t.getLifecycleFactories=function(){return[e,n]},t.getLifecycleFunctions=function(){return[i,r]},t.canDeactivate=function(n,r){var a=gt(r);return e[n]=a,i[n]=t.executeFactory(a),t},t.clearCanDeactivate=function(n){return e[n]=void 0,i[n]=void 0,t},t.canActivate=function(e,i){var a=gt(i);return n[e]=a,r[e]=t.executeFactory(a),t},t}var yt=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e={}),void 0===n&&(n={});return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}(function(t){return function(e){var n=D(D({},H),t);return e.getOptions=function(){return n},e.setOption=function(t,i){return n[t]=i,e},e}}(e),function(t){return function(e){var n=t;return e.setDependency=function(t,i){return n[t]=i,e},e.setDependencies=function(t){return Object.keys(t).forEach((function(n){return e.setDependency(n,t[n])})),e},e.getDependencies=function(){return n},e.getInjectables=function(){return[e,e.getDependencies()]},e.executeFactory=function(t){return t.apply(void 0,e.getInjectables())},e}}(n),lt,at,mt,vt,dt,st,ut,function(t){return function(e){e.forward=function(t,n){return e.config.forwardMap[t]=n,e};var n=t instanceof I?t:new I("","",t,{onAdd:i});function i(t){t.canActivate&&e.canActivate(t.name,t.canActivate),t.forwardTo&&e.forward(t.name,t.forwardTo),t.decodeParams&&(e.config.decoders[t.name]=t.decodeParams),t.encodeParams&&(e.config.encoders[t.name]=t.encodeParams),t.defaultParams&&(e.config.defaultParams[t.name]=t.defaultParams)}return e.rootNode=n,e.add=function(t,r){return n.add(t,i,!r),r&&n.sortDescendants(),e},e.addNode=function(t,i,r){return n.addNode(t,i),r&&e.canActivate(t,r),e},e.isActive=function(t,n,i,r){void 0===n&&(n={}),void 0===i&&(i=!1),void 0===r&&(r=!0);var a=e.getState();return!!a&&(i||a.name===t?e.areStatesEqual(e.makeState(t,n),a,r):e.areStatesDescendants(e.makeState(t,n),a))},e.buildPath=function(t,n){if(t===K)return n.path;var i=D(D({},e.config.defaultParams[t]),n),r=e.getOptions(),a=r.trailingSlashMode,o=r.queryParamsMode,s=r.queryParams,u=e.config.encoders[t]?e.config.encoders[t](i):i;return e.rootNode.buildPath(t,u,{trailingSlashMode:a,queryParamsMode:o,queryParams:s,urlParamsEncoding:e.getOptions().urlParamsEncoding})},e.matchPath=function(t,n){var i=e.getOptions(),r=e.rootNode.matchPath(t,i);if(r){var a=r.name,o=r.params,s=r.meta,u=e.config.decoders[a]?e.config.decoders[a](o):o,l=e.forwardState(a,u),c=l.name,f=l.params,h=!1===i.rewritePathOnMatch?t:e.buildPath(c,f);return e.makeState(c,f,h,{params:s,source:n})}return null},e.setRootPath=function(t){e.rootNode.setPath(t)},e}}(t))({config:{decoders:{},encoders:{},defaultParams:{},forwardMap:{}}})},bt=function(){return(bt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function wt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}var xt=function(t){return function(){return t}},_t=function(){},St="undefined"!=typeof window&&window.history,kt=function(t){try{return encodeURI(decodeURI(t))}catch(e){return t}},Mt=St?{getBase:function(){return window.location.pathname},pushState:function(t,e,n){return window.history.pushState(t,e,n)},replaceState:function(t,e,n){return window.history.replaceState(t,e,n)},addPopstateListener:function(t,e){var n=e.useHash&&!(-1===window.navigator.userAgent.indexOf("Trident"));return window.addEventListener("popstate",t),n&&window.addEventListener("hashchange",t),function(){window.removeEventListener("popstate",t),n&&window.removeEventListener("hashchange",t)}},getLocation:function(t){var e=t.useHash?window.location.hash.replace(new RegExp("^#"+t.hashPrefix),""):window.location.pathname.replace(new RegExp("^"+t.base),"");return(kt(e)||"/")+window.location.search},getState:function(){return window.history.state},getHash:function(){return window.location.hash}}:{getBase:xt(""),pushState:_t,replaceState:_t,addPopstateListener:_t,getLocation:xt(""),getState:xt(null),getHash:xt("")},Ct={forceDeactivate:!0,useHash:!1,hashPrefix:"",base:"",mergeState:!1,preserveHash:!0},Tt="popstate";function At(t,e){void 0===e&&(e=Mt);var n,i=bt(bt({},Ct),t),r={forceDeactivate:i.forceDeactivate,source:Tt};return function(t){var a=t.getOptions(),o=t.start;t.buildUrl=function(e,n){return(i.base||"")+(i.useHash?"#"+i.hashPrefix:"")+t.buildPath(e,n)};function s(t,n,r){var a=t?{meta:t.meta,name:t.name,params:t.params,path:t.path}:t,o=!0===i.mergeState?bt(bt({},e.getState()),a):a;r?e.replaceState(o,"",n):e.pushState(o,"",n)}function u(n){var o=t.getState(),u=!n.state||!n.state.name,l=u?t.matchPath(e.getLocation(i),Tt):t.makeState(n.state.name,n.state.params,n.state.path,bt(bt({},n.state.meta),{source:Tt}),n.state.meta.id),c=a.defaultRoute,f=a.defaultParams;l?o&&t.areStatesEqual(l,o,!1)||t.transitionToState(l,o,r,(function(e,n){if(e)if(e.redirect){var i=e.redirect,a=i.name,h=i.params;t.navigate(a,h,bt(bt({},r),{replace:!0,force:!0,redirected:!0}))}else if(e.code===X){var d=t.buildUrl(o.name,o.params);u||s(l,d,!0)}else c&&t.navigate(c,f,bt(bt({},r),{reload:!0,replace:!0}));else t.invokeEventListeners(it,n,o,{replace:!0})})):c&&t.navigateToDefault(bt(bt({},r),{reload:!0,replace:!0}))}function l(){n&&(n(),n=void 0)}return t.matchUrl=function(e){return t.matchPath(function(t){var e=t.match(/^(?:http|https):\/\/(?:[0-9a-z_\-.:]+?)(?=\/)(.*)$/),n=(e?e[1]:t).match(/^(.+?)(#.+?)?(\?.+)?$/);if(!n)throw new Error("[router5] Could not parse url "+t);var r=n[1],a=n[2]||"",o=n[3]||"";return(i.useHash?a.replace(new RegExp("^#"+i.hashPrefix),""):i.base?r.replace(new RegExp("^"+i.base),""):r)+o}(e))},t.start=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 0===n.length||"function"==typeof n[0]?o.apply(void 0,wt([e.getLocation(i)],n)):o.apply(void 0,n),t},t.replaceHistoryState=function(n,i,r){void 0===i&&(i={}),void 0===r&&(r="");var a=t.buildState(n,i),o=t.makeState(a.name,a.params,t.buildPath(a.name,a.params),{params:a.meta}),s=t.buildUrl(n,i);t.lastKnownState=o,e.replaceState(o,r,s)},{onStart:function(){i.useHash&&!i.base&&(i.base=e.getBase()),n=e.addPopstateListener(u,i)},onStop:l,teardown:l,onTransitionSuccess:function(n,r,a){var o=e.getState(),u=o&&o.meta&&o.name&&o.params,l=r&&t.areStatesEqual(r,n,!1),c=a.replace||!u||l,f=t.buildUrl(n.name,n.params);null===r&&!1===i.useHash&&!0===i.preserveHash&&(f+=e.getHash()),s(n,f,c)},onPopState:u}}}var Et=function(){function t(){}return t.use$=function(t){var e=this.collectRoutes(t),n=yt(e,{allowNotFound:!1,autoCleanUp:!0,defaultRoute:"welcome",defaultParams:{},queryParams:{arrayFormat:"default",nullFormat:"default",booleanFormat:"default"},queryParamsMode:"default",trailingSlashMode:"default",strictTrailingSlash:!1,caseSensitive:!1,urlParamsEncoding:"default"});return n.usePlugin(At({useHash:!0})),n.start(),this.router=n,n},t.collectRoutes=function(t,e){var n=this;return void 0===e&&(e=[]),t.forEach((function(t){var i={name:t.path,path:"/"+t.path};t.items&&(e=n.collectRoutes(t.items,e)),e.push(i)})),e},t}(),Pt=function(){this.x=0,this.y=0},zt=function(t){t&&Object.assign(this,t)},Nt=function(t){function e(e){var n;return(n=t.call(this,e)||this).distance=new Pt,n.strength=new Pt,n.speed=new Pt,n}return o(e,t),e}(zt),Lt=function(t){function e(e){var n;return(n=t.call(this,e)||this).distance=new Pt,n.strength=new Pt,n.speed=new Pt,n}return o(e,t),e}(zt),$t=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(zt),Rt=function(){function t(){}return t.getPosition=function(t,e){return t instanceof MouseEvent?e?(e.x=t.clientX,e.y=t.clientY):e={x:t.clientX,y:t.clientY}:t instanceof TouchEvent&&t.touches.length>0&&(e?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):e={x:t.touches[0].pageX,y:t.touches[0].pageY}),e},t.down$=function(t,i){var r,a=this;return e.merge(e.fromEvent(t,"mousedown"),e.fromEvent(t,"touchstart")).pipe(n.map((function(e){if((r=r||new Nt).node=t,r.target=e.target,r.originalEvent=e,r.down=a.getPosition(e,r.down),r.down)return r.distance=new Pt,r.strength=new Pt,r.speed=new Pt,i.next(r),r})),n.filter((function(t){return void 0!==t})))},t.move$=function(i,r,a,o,s){var u,l=this;return e.fromEvent(document,o.originalEvent instanceof MouseEvent?"mousemove":"touchmove").pipe(n.startWith(o),n.map((function(t){if((u=u||new Lt).node=i,u.target=t.target,u.originalEvent=t,u.position=l.getPosition(t,u.position),void 0!==o.down&&void 0!==u.position)return u.distance.x=u.position.x-o.down.x,u.distance.y=u.position.y-o.down.y,u.strength.x=u.distance.x/window.innerWidth*2,u.strength.y=u.distance.y/window.innerHeight*2,u.speed.x=o.speed.x+.1*(u.strength.x-o.strength.x),u.speed.y=o.speed.y+.1*(u.strength.y-o.strength.y),o.distance.x=u.distance.x,o.distance.y=u.distance.y,o.speed.x=u.speed.x,o.speed.y=u.speed.y,o.strength.x=u.strength.x,o.strength.y=u.strength.y,r.next(u),u})),n.filter((function(e){return null==s||!e||("vertical"===s&&Math.abs(e.distance.y)>20||"horizontal"===s&&Math.abs(e.distance.x)>20?(t.current$.next(i),e.originalEvent.stopImmediatePropagation(),!0):void 0)})))},t.up$=function(t,i,r,a,o){var s,u=this;return e.fromEvent(document,a.originalEvent instanceof MouseEvent?"mouseup":"touchend").pipe(n.map((function(t){return s=s||new $t,i.next(s),r.next(),u.current$.next(null),"vertical"===o?Math.abs(a.distance.y)>10&&(t.preventDefault(),t.stopImmediatePropagation()):Math.abs(a.distance.x)>10&&(t.preventDefault(),t.stopImmediatePropagation()),s})))},t.concurrent$=function(e,i,r,a,o){var s;return t.current$.pipe(n.filter((function(t){return null!=t&&t!==e})),n.map((function(t){return s=s||new $t,i.next(s),r.next(),s})))},t.events$=function(t,i){var r=this;t=t||document;var a=new e.ReplaySubject(1),o=new e.Subject;return this.down$(t,a).pipe(n.switchMap((function(s){return e.merge(r.move$(t,a,o,s,i),r.up$(t,a,o,s,i),r.concurrent$(t,a,o,s,i)).pipe(n.takeUntil(o))})),n.switchMap((function(){return a})))},t.isChildOf=function(t,e){for(var n=e?e.parentNode:null;null!=n;){if(n===t)return!0;n=n.parentNode}return!1},t}();a(Rt,"current$",new e.ReplaySubject(1));var It=function(){function t(){}return t.observer=function(){var t=this;return this.observer_||(this.readySubject_=new e.BehaviorSubject(!1),this.observerSubject_=new e.Subject,this.observer_=new IntersectionObserver((function(e){t.observerSubject_.next(e)}))),this.observer_},t.intersection$=function(t){if("IntersectionObserver"in window){var i=this.observer();return i.observe(t),this.observerSubject_.pipe(n.map((function(e){return e.find((function(e){return e.target===t}))})),n.filter((function(t){return void 0!==t})),n.finalize((function(){return i.unobserve(t)})))}return e.of({target:t,isIntersecting:!0})},t.firstIntersection$=function(t){return this.intersection$(t).pipe(n.filter((function(t){return t.isIntersecting})),n.first())},t}(),Ot=0,jt=1,qt=2,Ft=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var s=a.prototype;return s.getCurrent=function(){return this.state||(this.state={current:0}),this.state.current},s.setCurrent=function(t){void 0===t&&(t=0),this.container&&this.state.current!==t&&(this.state.current=t,this.change.next(t))},s.onActivate=function(){this.checkAutoplay()},s.onDeactivate=function(){this.userGesture=!1,this.disableAutoplay()},s.onInit=function(){var i,r=this,o=t.getContext(this).node;this.container=o,this.wrapper=o.querySelector(".slider__wrapper"),this.vertical?this.wrapper.classList.add(".slider__wrapper--vertical"):this.wrapper.classList.add(".slider__wrapper--horizontal"),i=o.hasAttribute("[items]")?this.items||[]:Array.prototype.slice.call(o.querySelectorAll(".slider__slide")),this.items=i,this.state.current=this.resolveInitialIndex(),this.userGesture=!1,setTimeout((function(){r.slider$().pipe(n.takeUntil(r.unsubscribe$)).subscribe((function(t){}))}),1),this.changed$().pipe(n.takeUntil(this.unsubscribe$)).subscribe(),this.intersect$(o).pipe(n.takeUntil(this.unsubscribe$)).subscribe(),"number"==typeof this.focusAutoplay&&e.merge(this.resize$(),this.over$(o),this.leave$(o)).pipe(n.takeUntil(this.unsubscribe$)).subscribe(),this.wheel$(o).pipe(n.takeUntil(this.unsubscribe$)).subscribe(),f.keys$().pipe(n.filter((function(t){return r.isVisible&&!a.disabled})),n.takeUntil(this.unsubscribe$)).subscribe((function(t){r.vertical?t.ArrowDown?r.hasNext()&&r.navTo(r.current+1):t.ArrowUp&&r.hasPrev()&&r.navTo(r.current-1):t.ArrowRight?r.hasNext()&&r.navTo(r.current+1):t.ArrowLeft&&r.hasPrev()&&r.navTo(r.current-1)})),setTimeout((function(){r.setActiveState()}),500),this.init.next(this)},s.resolveInitialIndex=function(){return 0},s.changed$=function(){var t=this;return this.change.pipe(n.tap((function(){t.setActiveState(),t.checkAutoplay()})))},s.intersect$=function(t){var e=this;return It.intersection$(t).pipe(n.tap((function(t){return e.active=t.isIntersecting&&t.intersectionRatio>0})))},s.wheel$=function(t){var i=this;return e.fromEvent(t,"wheel",{capture:!1,passive:!1}).pipe(n.tap((function(t){t.deltaY>0?i.hasNext()&&(t.preventDefault(),t.stopImmediatePropagation()):i.hasPrev()&&(t.preventDefault(),t.stopImmediatePropagation())})),n.filter((function(t){return i.isVisible})),n.throttleTime(1e3),n.tap((function(t){t.deltaY>0?i.hasNext()&&i.navTo(i.current+1):i.hasPrev()&&i.navTo(i.current-1)})))},s.resize$=function(){var t=this;return e.fromEvent(window,"resize").pipe(n.tap((function(){return t.mobile=window.innerWidth<768})))},s.over$=function(t){var i=this;return e.fromEvent(t,"mouseover").pipe(n.tap((function(){return i.over=!0})))},s.leave$=function(t){var i=this;return e.fromEvent(t,"mouseleave").pipe(n.tap((function(){return i.over=!1})))},s.setActiveState=function(){var e=this.current,n=t.getContext(this).node.firstElementChild.firstElementChild;Array.prototype.slice.call(n.children).forEach((function(t,n){n===e?t.classList.add("active"):t.classList.remove("active")}))},s.checkAutoplay=function(){var e=this;this.disableAutoplay();var n=Ot,i=0;if("number"==typeof this.autoplay&&(i=this.autoplay,n=jt),"number"==typeof this.focusAutoplay&&(i=this.focusAutoplay,n=qt),n!==Ot){var r=this.current,a=t.getContext(this).node,o=Array.prototype.slice.call(a.querySelectorAll(".slider__slide"))[r];if(o){var s=o.querySelector("video");if(s){s.addEventListener("ended",(function t(){s.removeEventListener("ended",t),(n===jt&&e.active_||n===qt&&(e.mobile_&&e.active_||!e.mobile_&&e.over_))&&(e.setCurrent((r+1)%e.items.length),e.pushChanges())})),s.play()}else(n===jt&&this.active_&&!this.userGesture||n===qt&&(this.mobile_&&this.active_||!this.mobile_&&this.over_))&&(this.to=setTimeout((function(){e.setCurrent((r+1)%e.items.length),e.pushChanges()}),i))}}},s.disableAutoplay=function(){this.to&&(clearTimeout(this.to),this.to=null);var e=t.getContext(this).node;Array.prototype.slice.call(e.querySelectorAll("video")).forEach((function(t){t.paused||t.pause()}))},s.checkFocusAutoplay=function(){this.mobile_?this.active_?this.checkAutoplay():this.disableAutoplay():this.over_?(this.setCurrent((this.current+1)%this.items.length),this.pushChanges()):this.disableAutoplay()},s.slider$=function(){var t,e,i,r=this;return Rt.events$(this.wrapper,this.vertical?"vertical":"horizontal").pipe(n.tap((function(n){n instanceof Nt?(t=r.getTranslation(r.wrapper,r.container),e=n):n instanceof Lt?i=r.onDragMoveEvent(e,n,t):n instanceof $t&&i&&(r.container.classList.remove("dragging"),r.wrapper.style.transform=null,r.onDragUpEvent(e,i,n))})))},s.onDragMoveEvent=function(t,e,n){if(this.container.classList.add("dragging"),this.vertical){var i=n.y+e.distance.y;this.wrapper.style.transform="translate3d(0px, "+i+"px, 0px)"}else{var r=n.x+e.distance.x;this.wrapper.style.transform="translate3d("+r+"px, 0px, 0px)"}return e},s.onDragUpEvent=function(t,e,n){if(this.vertical){var i=this.container.offsetHeight;-1*e.distance.y>.25*i&&this.hasNext()?this.navTo(this.current+1):-1*e.distance.y<-.25*i&&this.hasPrev()?this.navTo(this.current-1):this.wrapper.style.transform="translate3d(0, "+-100*this.current+"%, 0)"}else{var r=this.container.offsetWidth;-1*e.distance.x>.25*r&&this.hasNext()?this.navTo(this.current+1):-1*e.distance.x<-.25*r&&this.hasPrev()?this.navTo(this.current-1):this.wrapper.style.transform="translate3d("+-100*this.current+"%, 0, 0)"}},s.navTo=function(t,e){t=(t>0?t:this.items.length+t)%this.items.length,this.immediate=e,this.setCurrent(t),this.userGesture=!0,this.pushChanges(),this.immediate=!1},s.hasPrev=function(){return this.current-1>=0},s.hasNext=function(){return this.current+1<this.items.length},s.getTranslation=function(t,e){var n=0,i=0,r=0,a=t.style.transform;if(a){var o=a.split("(")[1].split(")")[0].split(",");n=parseFloat(o[0]),i=parseFloat(o[1]),r=parseFloat(o[2]),n=-1!==o[0].indexOf("%")?n*=.01*e.offsetWidth:n,i=-1!==o[1].indexOf("%")?i*=.01*e.offsetHeight:i}return{x:n,y:i,z:r}},r(a,[{key:"state",get:function(){return this.state_||(this.state_={current:0}),this.state_}},{key:"current",get:function(){return this.getCurrent()},set:function(t){t!==this.current&&this.setCurrent(t)}},{key:"isVisible",get:function(){var e=t.getContext(this).node.getBoundingClientRect();return e.left<window.innerWidth&&e.right>0&&e.top<window.innerHeight&&e.bottom>0}},{key:"wrapperStyle",get:function(){return this.vertical?{transform:"translate3d(0, "+-100*this.current+"%, 0)"}:{transform:"translate3d("+-100*this.current+"%, 0, 0)"}}},{key:"innerStyle",get:function(){return this.vertical?{height:100*this.items.length+"%"}:{width:100*this.items.length+"%"}}},{key:"active",get:function(){return this.active_},set:function(t){this.active_!==t&&(this.active_=t,t?this.onActivate():this.onDeactivate())}},{key:"mobile",get:function(){return this.mobile_},set:function(t){this.mobile_!==t&&(this.mobile_=t,this.checkFocusAutoplay())}},{key:"over",get:function(){return this.over_},set:function(t){this.over_!==t&&(this.over_=t,this.checkFocusAutoplay())}},{key:"currentItem",get:function(){return this.items.length>this.current?this.items[this.current]:null}}]),a}(t.Component);Ft.meta={selector:"[slider]",inputs:["items","current","autoplay","focusAutoplay","vertical"],outputs:["init","change"]};var Dt=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var u=a.prototype;return u.onInit=function(){var e=this;t.getContext(this).node.classList.remove("hidden"),this.slider=null,this.subSlider=null,this.chapterIndex=0,this.itemIndex=0,this.showMenu=!1,this.templates=s,this.slides=[],this.items=[],this.router=null,c.data$().pipe(n.first()).subscribe((function(t){e.slides=t,e.items=e.collectItems(e.slides);var i=document.querySelector("html");i.classList.add("resizing"),setTimeout((function(){i.classList.remove("resizing")}));var r=e.router=Et.use$(t);e.setRoute(r.getState()),e.route$().pipe(n.takeUntil(e.unsubscribe$)).subscribe()})),f.keys$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t.Space&&e.onToggleMenu()})),this.resize$().pipe(n.takeUntil(this.unsubscribe$)).subscribe(),this.fullscreen$().pipe(n.takeUntil(this.unsubscribe$)).subscribe()},u.setRoute=function(t){var e=this.items.find((function(e){return t.path==="/"+e.path}));e&&(document.title=e.documentTitle,this.isSuite=e.template===s.Suite)},u.route$=function(){var t=this;return e.from(Et.router).pipe(n.tap((function(e){var n=e.route;e.previousRoute;return t.setRoute(n)})))},u.updateLocation=function(){var t="",e=this.currentItem;if(e)t=e.path;else{var n=this.currentChapter;n&&(t=n.path)}this.router&&this.router.navigate(t)},u.resize$=function(){var t,i=document.querySelector("html");return e.fromEvent(window,"resize").pipe(n.throttleTime(200),n.tap((function(e){i.classList.add("resizing"),t&&clearTimeout(t),t=setTimeout((function(){i.classList.remove("resizing")}),200)})))},u.collectItems=function(t,e){var n=this;return void 0===e&&(e=[]),t.forEach((function(t){e.push(t),t.items&&(e=n.collectItems(t.items,e))})),e},u.onSliderInit=function(t){this.slider=t,this.chapterIndex=t.current,this.itemIndex=t.items[t.current].current},u.onSliderChange=function(t){this.chapterIndex=t;var e=this.slides[t];e&&(this.itemIndex=e.current),this.showMenu=!1,this.updateLocation(),this.pushChanges()},u.onSubSliderChange=function(t){this.itemIndex=t,this.showMenu=!1,this.updateLocation(),this.pushChanges()},u.onToggleMenu=function(){this.showMenu=!this.showMenu,this.pushChanges()},u.onMenuNav=function(t){this.slider.onMenuNav(t),this.showMenu=!1,this.pushChanges()},u.onPreviousChapter=function(){this.slider.hasPrev()&&this.slider.navTo(this.slider.current-1)},u.onNextChapter=function(){this.slider.hasNext()&&this.slider.navTo(this.slider.current+1)},u.onNavToChapter=function(t){this.slider.navTo(t)},u.onClickTerranova=function(){this.onNavToChapter(0),this.toggleFullScreen()},u.toggleFullScreen=function(){var e=t.getContext(this).node;!this.fullScreen?e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},u.fullscreen$=function(){var t=this;return e.fromEvent(document,"fullscreenchange").pipe(n.tap((function(e){var n=null!=document.fullscreenElement;t.fullScreen=n,t.pushChanges()})))},r(a,[{key:"isSuite",get:function(){return this.isSuite_},set:function(t){this.isSuite_!==t&&(this.isSuite_=t,this.pushChanges())}},{key:"showMenu",get:function(){return this.showMenu_},set:function(t){this.showMenu_=t,Ft.disabled=t}},{key:"previousChapter",get:function(){if(this.slider&&this.slider.hasPrev())return this.slides[this.slider.current-1]}},{key:"currentChapter",get:function(){if(this.slider)return this.slides[this.slider.current]}},{key:"nextChapter",get:function(){if(this.slider&&this.slider.hasNext())return this.slides[this.slider.current+1]}},{key:"currentItem",get:function(){var t=this.currentChapter;return t&&t.items&&null!=t.current?t.items[t.current]:null}}]),a}(t.Component);Dt.meta={selector:"[app-component]"};var Ht=function(e){function i(){return e.apply(this,arguments)||this}o(i,e);var r=i.prototype;return r.onInit=function(){t.getContext(this).node.classList.add("appear-stagger")},r.onChanges=function(){var e=t.getContext(this).node;It.firstIntersection$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.classList.add("appeared")}))},i}(t.Directive);Ht.meta={selector:"[appear-stagger]"};var Ut=function(){function t(){}return t.merge=function(t,e){var n=this;return"object"==typeof e&&Object.keys(e).forEach((function(i){var r=e[i];"object"!=typeof r||Array.isArray(r)?t[i]=r:t[i]=n.merge(t[i],r)})),t},t}(),Bt="undefined"!=typeof module&&module.exports,Gt=((Bt?{get:function(){}}:new URLSearchParams(window.location.search)).get("debug"),Bt?null:document.querySelector("base").getAttribute("href")),Vt=!Bt&&(window&&-1!==window.location.host.indexOf("herokuapp")),Wt=!Bt&&(Vt||window&&("41789"===window.location.port||"5000"===window.location.port||"6443"===window.location.port||"actarian.github.io"===window.location.host)),Xt=!Bt&&(window&&-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.host.split(":")[0])),Yt={STATIC:Wt,DEVELOPMENT:Xt,PRODUCTION:!Xt},Qt=function(){var t=e.prototype;function e(t){if(t){if("object"==typeof t.url){var e=t.language||"",n=t.market||"";Object.keys(t.url).forEach((function(i){t.url[i]=e+n+t.url[i]}))}Object.assign(this,t)}}return t.getAbsoluteUrl=function(t,e){var n=""+window.location.origin+t;return Object.keys(e).forEach((function(t){n=n.replace("$"+t,e[t])})),n},t.getPath=function(t){return this.isLocal(t)?this.href+t:t},t.isLocal=function(t){return-1===t.indexOf("://")},r(e,[{key:"STATIC",get:function(){return Yt.STATIC},set:function(t){Yt.STATIC=!0===t||"true"===t}},{key:"href",get:function(){return Vt?this.githubDocs:Gt}}]),e}(),Zt={channelName:"BHere",flags:{production:!1,useProxy:!1,useToken:!1,selfService:!0,guidedTourRequest:!0,editor:!0,ar:!0,menu:!0,attendee:!0,streamer:!0,viewer:!0,smartDevice:!0,maxQuality:!1,heroku:Vt}},Kt=window.STATIC?{flags:{production:!1},logo:null,background:{image:"/terranova/img/background.jpg",video:"/terranova/img/background.mp4"},colors:{menuBackground:"#000000",menuForeground:"#ffffff",menuOverBackground:"#0099ff",menuOverForeground:"#ffffff",menuBackBackground:"#0099ff",menuBackForeground:"#000000",menuBackOverBackground:"#0099ff",menuBackOverForeground:"#ffffff"},assets:"/terranova/",worker:"./js/workers/image.service.worker.js",githubDocs:"https://raw.githubusercontent.com/actarian/terranova/main/docs/",url:{index:"/"},languages:["en"],defaultLanguage:"en"}:{flags:{production:!0},logo:null,background:{image:"/Client/docs/img/background.jpg",video:"/Client/docs/img/background.mp4"},colors:{menuBackground:"#000000",menuForeground:"#ffffff",menuOverBackground:"#0099ff",menuOverForeground:"#ffffff",menuBackBackground:"#0099ff",menuBackForeground:"#000000",menuBackOverBackground:"#0099ff",menuBackOverForeground:"#ffffff"},assets:"/Client/docs/",worker:"/Client/docs/js/workers/image.service.worker.js",githubDocs:"https://raw.githubusercontent.com/actarian/terranova/main/docs/",url:{index:"/"},languages:["en"],defaultLanguage:"en"},Jt=Object.assign({port:5e3,fontFamily:"GT Walsheim, sans-serif",colors:{menuBackground:"#000000",menuForeground:"#ffffff",menuOverBackground:"#0099ff",menuOverForeground:"#ffffff",menuBackBackground:"#0099ff",menuBackForeground:"#000000",menuBackOverBackground:"#0099ff",menuBackOverForeground:"#ffffff"},editor:{disabledViewTypes:["waiting-room","room-3d"],disabledViewItemTypes:["texture"]},renderOrder:{panorama:0,model:10,plane:20,tile:30,banner:40,nav:50,panel:60,menu:70,debug:80,pointer:90}},Zt,Kt),te=new Qt(Jt=Ut.merge(Jt,window.bhere));console.log("environment",te);var ee=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.transform=function(t){return te.flags[t]||!1},e}(t.Pipe);ee.meta={name:"flag"};var ne=function(i){function r(){return i.apply(this,arguments)||this}o(r,i);var a=r.prototype;return a.onInit=function(){var e=this,i=t.getContext(this).node;i.focus(),this.current=0,this.slides.forEach((function(t){t.current=0})),f.keys$().pipe(n.filter((function(t){return e.active})),n.throttleTime(200),n.takeUntil(this.unsubscribe$)).subscribe((function(t){if(t.ArrowRight)e.nextChapter();else if(t.ArrowLeft)e.previousChapter();else if(t.ArrowDown)e.nextItem();else if(t.ArrowUp)e.previousItem();else if(t.Enter){var n=e.slides[e.current],i=n.items?n.items[n.current]:n;e.onSelect(i)}t.originalEvent&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation())})),this.wheel$(i).pipe(n.filter((function(t){return e.active})),n.takeUntil(this.unsubscribe$)).subscribe()},a.onChanges=function(){this.current=this.chapterIndex;var t=this.slides[this.current];t&&(t.current=this.itemIndex)},a.wheel$=function(t){var i=this;return e.fromEvent(t,"wheel",{capture:!1,passive:!1}).pipe(n.throttleTime(200),n.tap((function(t){t.deltaY>0?i.nextItem()||i.nextChapter():i.previousItem()||i.previousChapter()})))},a.nextChapter=function(){this.current<this.slides.length-1&&(this.current++,this.pushChanges())},a.previousChapter=function(){this.current>0&&(this.current--,this.pushChanges())},a.nextItem=function(){var t=this.slides[this.current];return!!(t.items&&t.current<t.items.length-1)&&(t.current++,this.pushChanges(),!0)},a.previousItem=function(){var t=this.slides[this.current];return!!(t.items&&t.current>0)&&(t.current--,this.pushChanges(),!0)},a.onSelect=function(t){var e,n=this,i=0,r=0;this.slides.forEach((function(n,a){n===t&&(i=a,e=n),n.items&&n.items.forEach((function(o,s){o===t&&(i=a,r=s,e=n)}))})),this.current!==i||e.current!==r?(this.current=i,e.current=r,this.pushChanges(),setTimeout((function(){n.nav.next({item:t,chapterIndex:i,index:r})}),500)):this.nav.next({item:t,chapterIndex:i,index:r})},a.navTo=function(t){this.current=t,this.pushChanges()},r}(t.Component);ne.meta={selector:"[footer-menu]",inputs:["slides","active","chapterIndex","itemIndex"],outputs:["nav"],template:'\n\t\t<div class="circle">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t<div class="logo">\n\t\t\t<img src="img/logo-lg.png" />\n\t\t</div>\n\t\t<div class="listing--menu" [style]="{ transform: \'translateX(\' + -76 * current + \'rem)\' }">\n\t\t\t<div class="listing__item" *for="let chapter of slides; let c = index;">\n\t\t\t\t<div class="listing--submenu" [style]="{ transform: \'translateY(\' + -25 * chapter.current + \'rem)\' }" *if="chapter.items && chapter.items.length">\n\t\t\t\t\t<div class="listing__item" *for="let item of chapter.items; let i = index;">\n\t\t\t\t\t\t<div class="card--menu" [class]="{ active: c === current && i === chapter.current }" (click)="onSelect(item)">\n\t\t\t\t\t\t\t<span [innerHTML]="item.name" ></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="card--menu" [class]="{ active: c === current }" (click)="onSelect(chapter)" *if="!chapter.items || !chapter.items.length">\n\t\t\t\t\t<span [innerHTML]="chapter.name"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="slider__bullets">\n\t\t\t<span class="slider__bullet" [class]="{ active: index === current }" *for="let item of slides; let index = index;" (click)="navTo(index)"></span>\n\t\t</div>\n\t'};var ie=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.onInit=function(){t.prototype.onInit.call(this)},n.navTo=function(e){t.prototype.navTo.call(this,e)},n.doClose=function(){this.close.next()},n.toggleMode=function(){this.mode.next()},r(e,[{key:"current",get:function(){return t.prototype.getCurrent.call(this)},set:function(t){this.setCurrent(t)}},{key:"wrapperStyle",get:function(){return{transform:"translate3d("+-100*this.current+"%, 0, 0)"}}},{key:"innerStyle",get:function(){return{width:100*this.items.length+"%"}}}]),e}(Ft);ie.meta={selector:"[slider-gallery]",inputs:["items","current","autoplay"],outputs:["change","tween","close","mode"]};var re=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var s=a.prototype;return s.onInit=function(){i.prototype.onInit.call(this),this.pagination$().pipe(n.takeUntil(this.unsubscribe$)).subscribe(),this.click$().pipe(n.takeUntil(this.unsubscribe$)).subscribe()},s.raf$=function(){return e.interval(0,e.animationFrameScheduler)},s.mouse$=function(){var t={x:0,y:0};return e.fromEvent(window,"mousemove").pipe(n.map((function(e){return t.x=e.clientX,t.y=e.clientY,t})))},s.pagination$=function(){var i=this,r=t.getContext(this).node,a={x:0,y:0},o=r.querySelector(".slider__pagination");return e.combineLatest([this.mouse$(),this.raf$()]).pipe(n.tap((function(t){var e=t[0];a.x+=(e.x-a.x)/20,a.y+=(e.y-a.y)/20,i.direction=e.x>window.innerWidth/2?1:-1,o.style.transform="translateX("+a.x+"px) translateY("+a.y+"px)"})))},s.click$=function(){var i=this,r=t.getContext(this).node;return e.fromEvent(r,"click").pipe(n.map((function(t){t.clientX>window.innerWidth/2?i.navTo(i.current+1):i.navTo(i.current-1)})))},s.onContentOver=function(){t.getContext(this).node.classList.add("content-over")},s.onContentOut=function(){t.getContext(this).node.classList.remove("content-over")},r(a,[{key:"current",get:function(){return i.prototype.getCurrent.call(this)},set:function(t){this.setCurrent(t)}},{key:"wrapperStyle",get:function(){return{transform:"translate3d("+-100*this.current+"%, 0, 0)"}}},{key:"innerStyle",get:function(){return{width:100*this.items.length+"%"}}},{key:"direction",set:function(e){if(this.direction_!==e){this.direction_=e;var n=t.getContext(this).node.querySelector(".slider__pagination");1==e?(n.classList.remove("prev"),n.classList.add("next")):(n.classList.remove("next"),n.classList.add("prev"))}}}]),a}(Ft);re.meta={selector:"[slider-hero]",inputs:["items","current","autoplay"],outputs:["change","tween"]};var ae=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var s=a.prototype;return s.onInit=function(){var t=this;i.prototype.onInit.call(this),this.subSlider=null,this.resize$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){return t.pushChanges()})),this.route$().pipe(n.takeUntil(this.unsubscribe$)).subscribe()},s.onChanges=function(){var t=this;this.items.forEach((function(e){return e.activeIndex=t.current}))},s.route$=function(){var t=this,i=Et.router.getState();return e.from(Et.router).pipe(n.startWith({route:i}),n.tap((function(e){var n=e.route,i=(e.previousRoute,t.items.reduce((function(t,e,i){return-1===t&&1===n.path.indexOf(e.path)?i:t}),-1));-1!==i&&(t.current=i)})))},s.resolveInitialIndex=function(){var t=Et.router.getState(),e=this.items.reduce((function(e,n,i){return-1===e&&1===t.path.indexOf(n.path)?i:e}),-1),n=0;return-1!==e&&(n=e),n},s.resolveInitialIndex_=function(){var t=0,e=window.location.hash;if(e){var n=this.items.reduce((function(t,n,i){return-1===t&&1===e.indexOf(n.slug)?i:t}),-1);-1!==n&&(t=n)}return t},s.resize$=function(){return e.fromEvent(window,"resize")},s.onContentOver=function(){t.getContext(this).node.classList.add("content-over")},s.onContentOut=function(){t.getContext(this).node.classList.remove("content-over")},s.navTo=function(t,e){i.prototype.navTo.call(this,t,e)},s.onSubSliderInit=function(t,e){this.items.forEach((function(e){e.items===t.items&&(e.subSlider=t,e.current=t.state.current)})),this.init.next(this)},s.onSubSliderChange=function(t){this.subChange.next(t)},s.onMenuNav=function(t){i.prototype.navTo.call(this,t.chapterIndex,!0);var e=this.items[t.chapterIndex];e.subSlider&&e.subSlider.navTo(t.index,!0)},r(a,[{key:"current",get:function(){return i.prototype.getCurrent.call(this)},set:function(t){this.setCurrent(t)}},{key:"wrapperStyle",get:function(){var t={transform:"translate3d("+-this.slideWidth*this.current+"px, 0, 0)"};return this.immediate&&(t.transition="none"),t}},{key:"innerStyle",get:function(){return{width:this.slideWidth*this.items.length+"px"}}},{key:"slideWidth",get:function(){return t.getContext(this).node.offsetWidth}},{key:"isNegative",get:function(){var t=this.items.reduce((function(t,e,n){return e.activeIndex===n?n:t}),-1),e=this.items[t],n=e.items?e.items[e.current]:null;return n&&null!=n.image&&"textMap"!==n.template}}]),a}(Ft);ae.meta={selector:"[slider-main]",inputs:["items","current","autoplay","focusAutoplay","vertical"],outputs:["init","change","subChange"]};var oe=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var s=a.prototype;return s.onInit=function(){var t=this;i.prototype.onInit.call(this),this.resize$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){return t.pushChanges()})),this.route$().pipe(n.takeUntil(this.unsubscribe$)).subscribe()},s.route$=function(){var t=this,i=Et.router.getState();return e.from(Et.router).pipe(n.startWith({route:i}),n.tap((function(e){var n=e.route,i=(e.previousRoute,t.items.reduce((function(t,e,i){return-1===t&&1===n.path.indexOf(e.path)?i:t}),-1));-1!==i&&(t.current=i)})))},s.resolveInitialIndex=function(){var t=Et.router.getState(),e=this.items.reduce((function(e,n,i){return-1===e&&1===t.path.indexOf(n.path)?i:e}),-1),n=0;return-1!==e&&(n=e),n},s.resolveInitialIndex_=function(){var t=0,e=window.location.hash;if(e){var n=this.items.reduce((function(t,n,i){return-1===t&&1===e.indexOf(n.slug)?i:t}),-1);-1!==n&&(t=n)}return t},s.resize$=function(){return e.fromEvent(window,"resize")},s.onContentOver=function(){t.getContext(this).node.classList.add("content-over")},s.onContentOut=function(){t.getContext(this).node.classList.remove("content-over")},s.navTo=function(t,e){i.prototype.navTo.call(this,t,e)},r(a,[{key:"current",get:function(){return i.prototype.getCurrent.call(this)},set:function(t){this.setCurrent(t)}},{key:"wrapperStyle",get:function(){var t={transform:"translate3d(0, "+-this.slideHeight*this.current+"px, 0)"};return this.immediate&&(t.transition="none"),t}},{key:"innerStyle",get:function(){return{height:this.slideHeight*this.items.length+"px"}}},{key:"slideHeight",get:function(){return t.getContext(this).node.offsetHeight}}]),a}(Ft);oe.meta={selector:"[slider-vertical]",inputs:["items","current","autoplay","focusAutoplay","vertical","disabled"],outputs:["init","change"]};var se=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){},e}(t.Component);se.meta={selector:"[view-clients]",inputs:["item"],template:'\n\t\t\x3c!--\n\t\t<div class="background">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t--\x3e\n\t\t\x3c!--\n\t\t<div class="container">\n\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t<div class="abstract" [innerHTML]="item.abstract"></div>\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="listing--clients" appear-stagger>\n\t\t\t<div class="listing__item" *for="let client of item.clients">\n\t\t\t\t<img [src]="client.logo" [title]="client.title" />\n\t\t\t</div>\n\t\t</div>\n\t'};var ue=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.onInit=function(){this.current=0},n.onSliderChange=function(t){this.current=t,this.pushChanges(),this.change.next(t)},n.onSliderInit=function(t){this.current=t.state.current,this.item.current=this.current,this.init.next(t)},r(e,[{key:"isNegative",get:function(){var t=this.item.items[this.current];return null!=t.image&&"textMap"!==t.template}}]),e}(t.Component);ue.meta={selector:"[view-group]",inputs:["item"],outputs:["init","change"],template:'\n\t\t<div class="slider__container slider--vertical" [class]="{ \'negative\': isNegative }" (init)="onSliderInit($event)" (change)="onSliderChange($event)" slider-vertical [vertical]="true" [items]="item.items" *if="item.template == \'group\'">\n\t\t\t<div class="slider__wrapper" [style]="wrapperStyle">\n\t\t\t\t<div class="slider__inner" [style]="innerStyle">\n\t\t\t\t\t<div class="slider__slide" *for="let slide of items; let index = index;">\n\t\t\t\t\t\t<div class="view view--clients" view-clients [item]="slide" *if="!slide.hidden && slide.template == \'clients\'"></div>\n\t\t\t\t\t\t<div class="view view--group" view-group [item]="slide" *if="!slide.hidden && slide.template == \'group\'"></div>\n\t\t\t\t\t\t<div class="view view--suite" view-suite [item]="slide" *if="!slide.hidden && slide.template == \'suite\'"></div>\n\t\t\t\t\t\t<div class="view view--tabs" view-tabs [item]="slide" *if="!slide.hidden && slide.template == \'tabs\'"></div>\n\t\t\t\t\t\t<div class="view view--text-center" view-text-center [item]="slide" *if="!slide.hidden && slide.template == \'textCenter\'"></div>\n\t\t\t\t\t\t<div class="view view--text-graph" view-text-graph [item]="slide" *if="!slide.hidden && slide.template == \'textGraph\'"></div>\n\t\t\t\t\t\t<div class="view view--text-left" view-text-left [item]="slide" *if="!slide.hidden && slide.template == \'textLeft\'"></div>\n\t\t\t\t\t\t<div class="view view--text-map" view-text-map [item]="slide" *if="!slide.hidden && slide.template == \'textMap\'"></div>\n\t\t\t\t\t\t<div class="view view--text-right" view-text-right [item]="slide" *if="!slide.hidden && slide.template == \'textRight\'"></div>\n\t\t\t\t\t\t<div class="view view--text-two-cols" view-text-two-cols [item]="slide" *if="!slide.hidden && slide.template == \'textTwoCols\'"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!--\n\t\t\t<div class="slider__bullets">\n\t\t\t\t<span class="slider__bullet" [class]="{ active: index === current }" *for="let slide of items; let index = index;" (click)="navTo(index)"></span>\n\t\t\t</div>\n\t\t\t--\x3e\n\t\t</div>\n\t'};var le=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){this.item.image&&getContext(this).node.querySelector(".container-fluid").classList.add("negative")},e}(t.Component);le.meta={selector:"[view-suite]",inputs:["item"],template:'\n\t\x3c!--\n\t\t<div class="container-fluid" appear-stagger>\n\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t</div>\n\t--\x3e\n\t\t<div class="suite" [innerHTML]="item.suite.title"></div>\n\t\t<div class="listing--software" appear-stagger>\n\t\t\t<div class="listing__item" [class]="{ left: software.x < 0.5, right: software.x > 0.5 }" [style]="{ left: software.x * 100 + \'%\', top: software.y * 100 + \'%\' }" *for="let software of item.suite.items">\n\t\t\t\t<div class="title" [style]="{ \'--color\': software.color }" [innerHTML]="software.title"></div>\n\t\t\t\t<div class="abstract" [innerHTML]="software.abstract" *if="software.abstract"></div>\n\t\t\t\t\x3c!-- <img [src]="software.logo" [title]="software.title" /> --\x3e\n\t\t\t</div>\n\t\t</div>\n\t'};var ce=function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var r=i.prototype;return r.onInit=function(){var t=Et.router.getState();this.setRoute(t),this.route$().pipe(n.takeUntil(this.unsubscribe$)).subscribe()},r.setRoute=function(t){var e=this.item.items.reduce((function(e,n,i){return-1===e&&1===t.path.indexOf(n.path)?i:e}),-1);this.index=-1!==e?e:0,this.slide=this.item.items[this.index]},r.route$=function(){var t=this;return e.from(Et.router).pipe(n.tap((function(e){var n=e.route;e.previousRoute;return t.setRoute(n)})))},r.setSlide=function(t){this.index=t,this.slide=this.item.items[t],Et.router.navigate(this.slide.path),this.pushChanges()},r.onTouch=function(t){t.preventDefault(),t.stopPropagation()},i}(t.Component);ce.meta={selector:"[view-tabs]",inputs:["item"],template:'\n\t\t<ul class="nav--tabs">\n\t\t\t<li *for="let nav of item.items; let navIndex = index;" (mousedown)="onTouch($event)" (touchstart)="onTouch($event)" (click)="setSlide(navIndex)"><span [innerHTML]="nav.name"></span></li>\n\t\t</ul>\n\t\t<div class="view view--clients" view-clients [item]="slide" *if="slide && !slide.hidden && slide.template == \'clients\'"></div>\n\t\t<div class="view view--group" view-group [item]="slide" *if="slide && !slide.hidden && slide.template == \'group\'"></div>\n\t\t<div class="view view--suite" view-suite [item]="slide" *if="slide && !slide.hidden && slide.template == \'suite\'"></div>\n\t\t<div class="view view--text-center" view-text-center [item]="slide" *if="slide && !slide.hidden && slide.template == \'textCenter\'"></div>\n\t\t<div class="view view--text-graph" view-text-graph [item]="slide" *if="slide && !slide.hidden && slide.template == \'textGraph\'"></div>\n\t\t<div class="view view--text-left" view-text-left [item]="slide" *if="slide && !slide.hidden && slide.template == \'textLeft\'"></div>\n\t\t<div class="view view--text-map" view-text-map [item]="slide" *if="slide && !slide.hidden && slide.template == \'textMap\'"></div>\n\t\t<div class="view view--text-right" view-text-right [item]="slide" *if="slide && !slide.hidden && slide.template == \'textRight\'"></div>\n\t\t<div class="view view--text-two-cols" view-text-two-cols [item]="slide" *if="slide && !slide.hidden && slide.template == \'textTwoCols\'"></div>\n\t'};var fe=function(e){function n(){return e.apply(this,arguments)||this}return o(n,e),n.prototype.onInit=function(){this.item.image&&t.getContext(this).node.querySelector(".container-fluid").classList.add("negative")},n}(t.Component);function he(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function de(t){let e=t,n=t;function i(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const a=i+r>>>1;n(t[a],e)<0?i=a+1:r=a}return i}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>he(t(e),n)}(t)),{left:i,center:function(t,n,r,a){null==r&&(r=0),null==a&&(a=t.length);const o=i(t,n,r,a-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const a=i+r>>>1;n(t[a],e)>0?r=a:i=a+1}return i}}}fe.meta={selector:"[view-text-center]",inputs:["item"],template:'\n\t\t<div class="background" *if="item.image">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="circle" *if="!item.image">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="container-fluid" appear-stagger>\n\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t<div class="logo" *if="item.logo"><img [src]="item.logo" /></div>\n\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t</div>\n\t'};const pe=de(he).right;de((function(t){return null===t?NaN:+t})).center;var me=Math.sqrt(50),ge=Math.sqrt(10),ve=Math.sqrt(2);function ye(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=me?10:a>=ge?5:a>=ve?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=me?10:a>=ge?5:a>=ve?2:1)}function be(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function we(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}var xe=Array.prototype.slice;function _e(t){return t}var Se=1e-6;function ke(t){return"translate("+t+",0)"}function Me(t){return"translate(0,"+t+")"}function Ce(t){return e=>+t(e)}function Te(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ae(){return!this.__axis}function Ee(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",f=1===t||3===t?ke:Me;function h(h){var d=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):_e:r,m=Math.max(a,0)+s,g=e.range(),v=+g[0]+u,y=+g[g.length-1]+u,b=(e.bandwidth?Te:Ce)(e.copy(),u),w=h.selection?h.selection():h,x=w.selectAll(".domain").data([null]),_=w.selectAll(".tick").data(d,e).order(),S=_.exit(),k=_.enter().append("g").attr("class","tick"),M=_.select("line"),C=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),M=M.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),C=C.merge(k.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==w&&(x=x.transition(h),_=_.transition(h),M=M.transition(h),C=C.transition(h),S=S.transition(h).attr("opacity",Se).attr("transform",(function(t){return isFinite(t=b(t))?f(t+u):this.getAttribute("transform")})),k.attr("opacity",Se).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:b(t))+u)}))),S.remove(),x.attr("d",4===t||2===t?o?"M"+l*o+","+v+"H"+u+"V"+y+"H"+l*o:"M"+u+","+v+"V"+y:o?"M"+v+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+v+","+u+"H"+y),_.attr("opacity",1).attr("transform",(function(t){return f(b(t)+u)})),M.attr(c+"2",l*a),C.attr(c,l*m).text(p),w.filter(Ae).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=xe.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:xe.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:xe.call(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(r=t,h):r},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function Pe(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function ze(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Ne=Symbol("implicit");function Le(){var t=new Map,e=[],n=[],i=Ne;function r(r){var a=r+"",o=t.get(a);if(!o){if(i!==Ne)return i;t.set(a,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const i of n){const n=i+"";t.has(n)||t.set(n,e.push(i))}return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Le(e,n).unknown(i)},ze.apply(r,arguments),r}function $e(){var t,e,n=Le().unknown(void 0),i=n.domain,r=n.range,a=0,o=1,s=!1,u=0,l=0,c=.5;function f(){var n=i().length,f=o<a,h=f?o:a,d=f?a:o;t=(d-h)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*c,e=t*(1-u),s&&(h=Math.round(h),e=Math.round(e));var p=we(n).map((function(e){return h+t*e}));return r(f?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),f()):i()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,f()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,f()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return $e(i(),[a,o]).round(s).paddingInner(u).paddingOuter(l).align(c)},ze.apply(f(),arguments)}function Re(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ie(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Oe(){}var je=.7,qe=1/je,Fe="\\s*([+-]?\\d+)\\s*",De="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ue=/^#([0-9a-f]{3,8})$/,Be=new RegExp("^rgb\\("+[Fe,Fe,Fe]+"\\)$"),Ge=new RegExp("^rgb\\("+[He,He,He]+"\\)$"),Ve=new RegExp("^rgba\\("+[Fe,Fe,Fe,De]+"\\)$"),We=new RegExp("^rgba\\("+[He,He,He,De]+"\\)$"),Xe=new RegExp("^hsl\\("+[De,He,He]+"\\)$"),Ye=new RegExp("^hsla\\("+[De,He,He,De]+"\\)$"),Qe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ze(){return this.rgb().formatHex()}function Ke(){return this.rgb().formatRgb()}function Je(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?tn(e):3===n?new an(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?en(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?en(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Be.exec(t))?new an(e[1],e[2],e[3],1):(e=Ge.exec(t))?new an(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ve.exec(t))?en(e[1],e[2],e[3],e[4]):(e=We.exec(t))?en(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Xe.exec(t))?ln(e[1],e[2]/100,e[3]/100,1):(e=Ye.exec(t))?ln(e[1],e[2]/100,e[3]/100,e[4]):Qe.hasOwnProperty(t)?tn(Qe[t]):"transparent"===t?new an(NaN,NaN,NaN,0):null}function tn(t){return new an(t>>16&255,t>>8&255,255&t,1)}function en(t,e,n,i){return i<=0&&(t=e=n=NaN),new an(t,e,n,i)}function nn(t){return t instanceof Oe||(t=Je(t)),t?new an((t=t.rgb()).r,t.g,t.b,t.opacity):new an}function rn(t,e,n,i){return 1===arguments.length?nn(t):new an(t,e,n,null==i?1:i)}function an(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function on(){return"#"+un(this.r)+un(this.g)+un(this.b)}function sn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function un(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ln(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fn(t,e,n,i)}function cn(t){if(t instanceof fn)return new fn(t.h,t.s,t.l,t.opacity);if(t instanceof Oe||(t=Je(t)),!t)return new fn;if(t instanceof fn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new fn(o,s,u,t.opacity)}function fn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function hn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Re(Oe,Je,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ze,formatHex:Ze,formatHsl:function(){return cn(this).formatHsl()},formatRgb:Ke,toString:Ke}),Re(an,rn,Ie(Oe,{brighter:function(t){return t=null==t?qe:Math.pow(qe,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?je:Math.pow(je,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:on,formatHex:on,formatRgb:sn,toString:sn})),Re(fn,(function(t,e,n,i){return 1===arguments.length?cn(t):new fn(t,e,n,null==i?1:i)}),Ie(Oe,{brighter:function(t){return t=null==t?qe:Math.pow(qe,t),new fn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?je:Math.pow(je,t),new fn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new an(hn(t>=240?t-240:t+120,r,i),hn(t,r,i),hn(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var dn=t=>()=>t;function pn(t){return 1==(t=+t)?mn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):dn(isNaN(e)?n:e)}}function mn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):dn(isNaN(t)?e:t)}var gn=function t(e){var n=pn(e);function i(t,e){var i=n((t=rn(t)).r,(e=rn(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=mn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function vn(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}}function yn(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=Mn(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}function bn(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function wn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xn(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Mn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(_n.source,"g");function kn(t,e){var n,i,r,a=_n.lastIndex=Sn.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=_n.exec(t))&&(i=Sn.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:wn(n,i)})),a=Sn.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,i=0;i<e;++i)s[(n=u[i]).i]=n.x(t);return s.join("")})}function Mn(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?dn(e):("number"===r?wn:"string"===r?(n=Je(e))?(e=n,gn):kn:e instanceof Je?gn:e instanceof Date?bn:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?yn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?xn:wn:vn))(t,e)}function Cn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Tn,An=180/Math.PI,En={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pn(t,e,n,i,r,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),t*i<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*An,skewX:Math.atan(u)*An,scaleX:o,scaleY:s}}function zn(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,i,r,a,o,s){if(t!==r||i!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:wn(t,r)},{i:u-2,x:wn(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:wn(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:wn(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(a.skewX,o.skewX,s,u),function(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:wn(t,n)},{i:s-2,x:wn(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,i=u.length;++n<i;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Nn=zn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?En:Pn(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Ln=zn((function(t){return null==t?En:(Tn||(Tn=document.createElementNS("http://www.w3.org/2000/svg","g")),Tn.setAttribute("transform",t),(t=Tn.transform.baseVal.consolidate())?Pn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):En)}),", ",")",")");function $n(t){return+t}var Rn=[0,1];function In(t){return t}function On(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function jn(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=On(r,i),a=n(o,a)):(i=On(i,r),a=n(a,o)),function(t){return a(i(t))}}function qn(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=On(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=pe(t,e,1,i)-1;return a[n](r[n](e))}}function Fn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Dn(){var t,e,n,i,r,a,o=Rn,s=Rn,u=Mn,l=In;function c(){var t,e,n,u=Math.min(o.length,s.length);return l!==In&&(t=o[0],e=o[u-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),i=u>2?qn:jn,r=a=null,f}function f(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((a||(a=i(s,o.map(t),wn)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,$n),c()):o.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=Cn,c()},f.clamp=function(t){return arguments.length?(l=!!t||In,c()):l!==In},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,i){return t=n,e=i,c()}}function Hn(){return Dn()(In,In)}function Un(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Bn(t){return(t=Un(Math.abs(t)))?t[1]:NaN}var Gn,Vn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wn(t){if(!(e=Vn.exec(t)))throw new Error("invalid format: "+t);var e;return new Xn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Xn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Yn(t,e){var n=Un(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Wn.prototype=Xn.prototype,Xn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Qn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yn(100*t,e),r:Yn,s:function(t,e){var n=Un(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(Gn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Un(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Zn(t){return t}var Kn,Jn,ti,ei=Array.prototype.map,ni=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ii(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Zn:(e=ei.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,a=[],o=0,s=e[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(t.substring(r-=s,r+s)),!((u+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Zn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ei.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Wn(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Qn[y]||(void 0===g&&(g=12),v=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?r:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?a:/[%p]/.test(y)?u:"",x=Qn[y],_=/[defgprs%]/.test(y);function S(t){var r,a,u,h=b,S=w;if("c"===y)S=x(t)+S,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),h=(k?"("===f?f:l:"-"===f||"("===f?"":f)+h,S=("s"===y?ni[8+Gn/3]:"")+S+(k&&"("===f?")":""),_)for(r=-1,a=t.length;++r<a;)if(48>(u=t.charCodeAt(r))||u>57){S=(46===u?o+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var M=h.length+t.length+S.length,C=M<p?new Array(p-M+1).join(e):"";switch(m&&d&&(t=i(C+t,C.length?p-S.length:1/0),C=""),n){case"<":t=h+t+S+C;break;case"=":t=h+C+t+S;break;case"^":t=C.slice(0,M=C.length>>1)+h+t+S+C.slice(M);break;default:t=C+h+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:f,formatPrefix:function(t,e){var n=f(((t=Wn(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Bn(e)/3))),r=Math.pow(10,-i),a=ni[8+i/3];return function(t){return n(r*t)+a}}}}function ri(t,e,n,i){var r,a=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=me?r*=10:a>=ge?r*=5:a>=ve&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Wn(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Bn(e)/3)))-Bn(Math.abs(t)))}(a,o))||(i.precision=r),ti(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bn(e)-Bn(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Bn(Math.abs(t)))}(a))||(i.precision=r-2*("%"===i.type))}return Jn(i)}function ai(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=ye(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(o=-o,t=Math.ceil(t*o),e=Math.floor(e*o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)/o;return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return ri(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,a=e(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;for(l<u&&(r=u,u=l,l=r,r=o,o=s,s=r);c-- >0;){if((r=ye(u,l,n))===i)return a[o]=u,a[s]=l,e(a);if(r>0)u=Math.floor(u/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;u=Math.ceil(u*r)/r,l=Math.floor(l*r)/r}i=r}return t},t}function oi(){var t=Hn();return t.copy=function(){return Fn(t,oi())},ze.apply(t,arguments),ai(t)}Kn=ii({thousands:",",grouping:[3],currency:["$",""]}),Jn=Kn.format,ti=Kn.formatPrefix;var si="http://www.w3.org/1999/xhtml",ui={svg:"http://www.w3.org/2000/svg",xhtml:si,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function li(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ui.hasOwnProperty(e)?{space:ui[e],local:t}:t}function ci(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===si&&e.documentElement.namespaceURI===si?e.createElement(t):e.createElementNS(n,t)}}function fi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hi(t){var e=li(t);return(e.local?fi:ci)(e)}function di(){}function pi(t){return null==t?di:function(){return this.querySelector(t)}}function mi(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function gi(){return[]}function vi(t){return null==t?gi:function(){return this.querySelectorAll(t)}}function yi(t){return function(){return this.matches(t)}}function bi(t){return function(e){return e.matches(t)}}var wi=Array.prototype.find;function xi(){return this.firstElementChild}var _i=Array.prototype.filter;function Si(){return this.children}function ki(t){return new Array(t.length)}function Mi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ci(t){return function(){return t}}function Ti(t,e,n,i,r,a){for(var o,s=0,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Mi(t,a[s]);for(;s<u;++s)(o=e[s])&&(r[s]=o)}function Ai(t,e,n,i,r,a,o){var s,u,l,c=new Map,f=e.length,h=a.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=l=o.call(u,u.__data__,s,e)+"",c.has(l)?r[s]=u:c.set(l,u));for(s=0;s<h;++s)l=o.call(t,a[s],s,a)+"",(u=c.get(l))?(i[s]=u,u.__data__=a[s],c.delete(l)):n[s]=new Mi(t,a[s]);for(s=0;s<f;++s)(u=e[s])&&c.get(d[s])===u&&(r[s]=u)}function Ei(t){return t.__data__}function Pi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zi(t){return function(){this.removeAttribute(t)}}function Ni(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Li(t,e){return function(){this.setAttribute(t,e)}}function $i(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ri(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ii(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Oi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ji(t){return function(){this.style.removeProperty(t)}}function qi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Fi(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Di(t,e){return t.style.getPropertyValue(e)||Oi(t).getComputedStyle(t,null).getPropertyValue(e)}function Hi(t){return function(){delete this[t]}}function Ui(t,e){return function(){this[t]=e}}function Bi(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Gi(t){return t.trim().split(/^|\s+/)}function Vi(t){return t.classList||new Wi(t)}function Wi(t){this._node=t,this._names=Gi(t.getAttribute("class")||"")}function Xi(t,e){for(var n=Vi(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Yi(t,e){for(var n=Vi(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Qi(t){return function(){Xi(this,t)}}function Zi(t){return function(){Yi(this,t)}}function Ki(t,e){return function(){(e.apply(this,arguments)?Xi:Yi)(this,t)}}function Ji(){this.textContent=""}function tr(t){return function(){this.textContent=t}}function er(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function nr(){this.innerHTML=""}function ir(t){return function(){this.innerHTML=t}}function rr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ar(){this.nextSibling&&this.parentNode.appendChild(this)}function or(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sr(){return null}function ur(){var t=this.parentNode;t&&t.removeChild(this)}function lr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fr(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function hr(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function dr(t,e,n){return function(){var i,r=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=e);this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function pr(t,e,n){var i=Oi(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function mr(t,e){return function(){return pr(this,t,e)}}function gr(t,e){return function(){return pr(this,t,e.apply(this,arguments))}}Mi.prototype={constructor:Mi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Wi.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var vr=[null];function yr(t,e){this._groups=t,this._parents=e}function br(){return new yr([[document.documentElement]],vr)}function wr(t){return function(t){return"string"==typeof t?new yr([[document.querySelector(t)]],[document.documentElement]):new yr([[t]],vr)}(hi(t).call(document.documentElement))}yr.prototype=br.prototype={constructor:yr,select:function(t){"function"!=typeof t&&(t=pi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],u=s.length,l=i[r]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new yr(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:mi(e)}}(t):vi(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o,s=e[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(i.push(t.call(o,o.__data__,l,s)),r.push(o));return new yr(i,r)},selectChild:function(t){return this.select(null==t?xi:function(t){return function(){return wi.call(this.children,t)}}("function"==typeof t?t:bi(t)))},selectChildren:function(t){return this.selectAll(null==t?Si:function(t){return function(){return _i.call(this.children,t)}}("function"==typeof t?t:bi(t)))},filter:function(t){"function"!=typeof t&&(t=yi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new yr(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Ei);var n=e?Ai:Ti,i=this._parents,r=this._groups;"function"!=typeof t&&(t=Ci(t));for(var a=r.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=i[l],f=r[l],h=f.length,d=mi(t.call(c,c&&c.__data__,l,i)),p=d.length,m=s[l]=new Array(p),g=o[l]=new Array(p),v=u[l]=new Array(h);n(c,f,m,g,v,d,e);for(var y,b,w=0,x=0;w<p;++w)if(y=m[w]){for(w>=x&&(x=w+1);!(b=g[x])&&++x<p;);y._next=b||null}}return(o=new yr(o,i))._enter=s,o._exit=u,o},enter:function(){return new yr(this._enter||this._groups.map(ki),this._parents)},exit:function(){return new yr(this._exit||this._groups.map(ki),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){if(!(t instanceof yr))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u,l=e[s],c=n[s],f=l.length,h=o[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<i;++s)o[s]=e[s];return new yr(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Pi);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],u=s.length,l=r[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(e)}return new yr(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=li(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Ni:zi:"function"==typeof e?n.local?Ii:Ri:n.local?$i:Li)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?ji:"function"==typeof e?Fi:qi)(t,e,null==n?"":n)):Di(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Hi:"function"==typeof e?Bi:Ui)(t,e)):this.node()[t]},classed:function(t,e){var n=Gi(t+"");if(arguments.length<2){for(var i=Vi(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Ki:e?Qi:Zi)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ji:("function"==typeof t?er:tr)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?nr:("function"==typeof t?rr:ir)(t)):this.node().innerHTML},raise:function(){return this.each(ar)},lower:function(){return this.each(or)},append:function(t){var e="function"==typeof t?t:hi(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:hi(t),i=null==e?sr:"function"==typeof e?e:pi(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(ur)},clone:function(t){return this.select(t?cr:lr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=fr(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?dr:hr,i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(i=0,u=s[l];i<o;++i)if((r=a[i]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?gr:mr)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}};var xr={value:()=>{}};function _r(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new Sr(i)}function Sr(t){this._=t}function kr(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Mr(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Cr(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=xr,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Sr.prototype=_r.prototype={constructor:Sr,on:function(t,e){var n,i=this._,r=kr(t+"",i),a=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=r[a]).type)i[n]=Cr(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Cr(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=r[a]).type)&&(n=Mr(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Sr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var Tr,Ar,Er=0,Pr=0,zr=0,Nr=0,Lr=0,$r=0,Rr="object"==typeof performance&&performance.now?performance:Date,Ir="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Or(){return Lr||(Ir(jr),Lr=Rr.now()+$r)}function jr(){Lr=0}function qr(){this._call=this._time=this._next=null}function Fr(t,e,n){var i=new qr;return i.restart(t,e,n),i}function Dr(){Lr=(Nr=Rr.now())+$r,Er=Pr=0;try{!function(){Or(),++Er;for(var t,e=Tr;e;)(t=Lr-e._time)>=0&&e._call.call(null,t),e=e._next;--Er}()}finally{Er=0,function(){var t,e,n=Tr,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Tr=e);Ar=t,Ur(i)}(),Lr=0}}function Hr(){var t=Rr.now(),e=t-Nr;e>1e3&&($r-=e,Nr=t)}function Ur(t){Er||(Pr&&(Pr=clearTimeout(Pr)),t-Lr>24?(t<1/0&&(Pr=setTimeout(Dr,t-Rr.now()-$r)),zr&&(zr=clearInterval(zr))):(zr||(Nr=Rr.now(),zr=setInterval(Hr,1e3)),Er=1,Ir(Dr)))}function Br(t,e,n){var i=new qr;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}qr.prototype=Fr.prototype={constructor:qr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Or():+n)+(null==e?0:+e),this._next||Ar===this||(Ar?Ar._next=this:Tr=this,Ar=this),this._call=t,this._time=n,Ur()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ur())}};var Gr=_r("start","end","cancel","interrupt"),Vr=[];function Wr(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var l,c,f,h;if(1!==n.state)return u();for(l in r)if((h=r[l]).name===n.name){if(3===h.state)return Br(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[l]):+l<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[l])}if(Br((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=h);i.length=c+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Fr(a,0,n.time)}(t,n,{name:e,index:i,group:r,on:Gr,tween:Vr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Xr(t,e){var n=Qr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Yr(t,e){var n=Qr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Qr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zr(t,e){var n,i;return function(){var r=Yr(this,t),a=r.tween;if(a!==n)for(var o=0,s=(i=n=a).length;o<s;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function Kr(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=Yr(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=s;break}u===l&&r.push(s)}a.tween=r}}function Jr(t,e,n){var i=t._id;return t.each((function(){var t=Yr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Qr(t,i).value[e]}}function ta(t,e){var n;return("number"==typeof e?wn:e instanceof Je?gn:(n=Je(e))?(e=n,gn):kn)(t,e)}function ea(t){return function(){this.removeAttribute(t)}}function na(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ia(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===i?r:r=e(i=o,n)}}function ra(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===i?r:r=e(i=o,n)}}function aa(t,e,n){var i,r,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(s=u+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,u));this.removeAttribute(t)}}function oa(t,e,n){var i,r,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,u));this.removeAttributeNS(t.space,t.local)}}function sa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ua(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function la(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&ua(t,r)),n}return r._value=e,r}function ca(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&sa(t,r)),n}return r._value=e,r}function fa(t,e){return function(){Xr(this,t).delay=+e.apply(this,arguments)}}function ha(t,e){return e=+e,function(){Xr(this,t).delay=e}}function da(t,e){return function(){Yr(this,t).duration=+e.apply(this,arguments)}}function pa(t,e){return e=+e,function(){Yr(this,t).duration=e}}function ma(t,e){if("function"!=typeof e)throw new Error;return function(){Yr(this,t).ease=e}}function ga(t,e,n){var i,r,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Xr:Yr;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}var va=br.prototype.constructor;function ya(t){return function(){this.style.removeProperty(t)}}function ba(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function wa(t,e,n){var i,r;function a(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&ba(t,a,n)),i}return a._value=e,a}function xa(t){return function(e){this.textContent=t.call(this,e)}}function _a(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&xa(i)),e}return i._value=t,i}var Sa=0;function ka(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Ma(t){return br().transition(t)}function Ca(){return++Sa}var Ta=br.prototype;ka.prototype=Ma.prototype={constructor:ka,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pi(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,u,l=i[o],c=l.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,Wr(f[h],e,n,h,f,Qr(s,n)));return new ka(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=vi(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u,l=i[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=Qr(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&Wr(h,e,n,m,d,p);a.push(d),o.push(u)}return new ka(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=yi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new ka(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u,l=e[s],c=n[s],f=l.length,h=o[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<i;++s)o[s]=e[s];return new ka(o,this._parents,this._name,this._id)},selection:function(){return new va(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ca(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=Qr(o,e);Wr(o,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ka(i,this._parents,t,n)},call:Ta.call,nodes:Ta.nodes,node:Ta.node,size:Ta.size,empty:Ta.empty,each:Ta.each,on:function(t,e){var n=this._id;return arguments.length<2?Qr(this.node(),n).on.on(t):this.each(ga(n,t,e))},attr:function(t,e){var n=li(t),i="transform"===n?Ln:ta;return this.attrTween(t,"function"==typeof e?(n.local?oa:aa)(n,i,Jr(this,"attr."+t,e)):null==e?(n.local?na:ea)(n):(n.local?ra:ia)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=li(t);return this.tween(n,(i.local?la:ca)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Nn:ta;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var a=Di(this,t),o=(this.style.removeProperty(t),Di(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}(t,i)).on("end.style."+t,ya(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,a;return function(){var o=Di(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Di(this,t)),o===u?null:o===i&&u===r?a:(r=u,a=e(i=o,s))}}(t,i,Jr(this,"style."+t,e))).each(function(t,e){var n,i,r,a,o="style."+e,s="end."+o;return function(){var u=Yr(this,t),l=u.on,c=null==u.value[o]?a||(a=ya(e)):void 0;l===n&&r===c||(i=(n=l).copy()).on(s,r=c),u.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,a=n+"";return function(){var o=Di(this,t);return o===a?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,wa(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Jr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,_a(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Qr(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?Zr:Kr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?fa:ha)(e,t)):Qr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?da:pa)(e,t)):Qr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(ma(e,t)):Qr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Yr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0==--r&&a()}};n.each((function(){var n=Yr(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===r&&a()}))},[Symbol.iterator]:Ta[Symbol.iterator]};var Aa={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ea(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}br.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}(this,t)}))},br.prototype.transition=function(t){var e,n;t instanceof ka?(e=t._id,t=t._name):(e=Ca(),(n=Aa).time=Or(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,l=0;l<u;++l)(o=s[l])&&Wr(o,t,e,l,s,n||Ea(o,e));return new ka(i,this._parents,t,e)};var Pa=function(i){function a(){return i.apply(this,arguments)||this}o(a,i);var s=a.prototype;return s.onInit=function(){var t=this;this.loadChart$().pipe(n.first()).subscribe((function(e){t.data=e,t.checkChart()}))},s.onChanges=function(){this.checkChart()},s.checkChart=function(){var e=this;this.chart&&this.chart.remove(),this.to&&clearTimeout(this.to),this.to=setTimeout((function(){if(e.isVisible&&e.data){var n=e.data,i=e.item.graph.format,r=e.chart=e.makeChart(n,i);t.getContext(e).node.querySelector(".graph").appendChild(r)}}),200)},s.loadChart$=function(){return e.from(fetch(this.item.graph.url).then((function(t){return t.text()})).then((function(t){var e=t.split("\n"),n=e.shift().split(",").map((function(t){return JSON.parse(t)}));return e.filter((function(t){return t.length>0})).map((function(t){var e={},i=t.split(",");return n.forEach((function(t,n){e[t]=JSON.parse(i[n])})),e}))})))},s.getTransition=function(){return Ma().duration(750).ease(Pe)},s.makeChart=function(t,e){var n=window.innerWidth/100*1.5,i="#114895",r={top:n,right:0,bottom:n,left:0},a=$e().domain(we(t.length)).range([r.left,600-r.right]).padding(.1),o=oi().domain([0,be(t,(function(t){return t.value}))]).nice().range([500-r.bottom,r.top]),s=wr("svg").attr("viewBox",[0,0,600,500]);return s.append("g").attr("fill",i).selectAll("rect").data(t).join("rect").attr("rx",4.5).attr("x",(function(t,e){return a(e)})).attr("width",a.bandwidth()).attr("y",(function(t){return o(t.value)+o(0)-o(t.value)})).transition().duration(450).ease(Pe).delay((function(t,e){return 50*e})).attr("y",(function(t){return o(t.value)})).attr("height",(function(t){return o(0)-o(t.value)})),s.append("g").attr("fill",i).selectAll("text").data(t).join("text").attr("dy",".75em").attr("x",(function(t,e){return a(e)+a.bandwidth()/2})).attr("y",(function(t){return o(t.value)-2*n})).attr("opacity","0").attr("text-anchor","middle").attr("font-size","1.8rem").attr("font-weight","700").text((function(t){return e.replace("%",t.value)})).transition().duration(350).ease(Pe).delay((function(t,e){return 450+50*e})).attr("y",(function(t){return o(t.value)-n})).attr("opacity","1"),s.append("g").call((function(e){return e.attr("transform","translate(0,"+(500-r.bottom)+")").call((n=a,Ee(3,n)).tickFormat((function(e){return t[e].name})).tickSizeOuter(0)).attr("font-size","1.8rem").attr("font-weight","700");var n})),s.node()},r(a,[{key:"isVisible",get:function(){var e=t.getContext(this).node.getBoundingClientRect();return e.left<window.innerWidth&&e.right>0&&e.top<window.innerHeight&&e.bottom>0}}]),a}(t.Component);Pa.meta={selector:"[view-text-graph]",inputs:["item"],template:'\n\t\t<div class="background" *if="item.image">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="circle" [class]="{ dimmed: item.image }">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="container-fluid" [class]="{ \'negative\': item.image != null }" >\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6" appear-stagger>\n\t\t\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div class="graph"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var za=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){},e}(t.Component);za.meta={selector:"[view-text-left]",inputs:["item"],template:'\n\t\t<div class="background" *if="item.image">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="circle" *if="!item.image">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="container-fluid" [class]="{ \'negative\': item.image != null }" >\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6" appear-stagger>\n\t\t\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<ul class="listing--values" appear-stagger *if="item.list && item.list.length">\n\t\t\t\t\t\t<li class="listing__item" *for="let listItem of item.list"><span [innerHTML]="listItem.title"></span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var Na="always",La=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){this.item.pinMode=this.item.pinMode||Na},e}(t.Component);La.meta={selector:"[view-text-map]",inputs:["item"],template:'\n\t\t\x3c!--\n\t\t<div class="circle">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="background">\n\t\t\t<div class="map" [class]="{ \'map--over\': item.pinMode === \'over\', \'map--always\': item.pinMode === \'always\' }" appear-stagger>\n\t\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t\t\t<div class="pin" [style]="{ left: pin.x + \'%\', top: pin.y + \'%\' }" *for="let pin of item.pins;">\n\t\t\t\t\t<div class="title" *if="pin.title && !pin.logo" [innerHTML]="pin.title"></div>\n\t\t\t\t\t<div class="abstract" *if="pin.abstract && !pin.logo" [innerHTML]="pin.abstract"></div>\n\t\t\t\t\t<div class="logo" *if="pin.logo"><img [src]="pin.logo" /></div>\n\t\t\t\t</div>\n\t\t\t\t\x3c!--\n\t\t\t\t<div class="pin" [style]="{ left: pin.x + \'%\', top: pin.y + \'%\' }" *for="let pin of item.pins;">\n\t\t\t\t\t<div class="title" *if="pin.title" [innerHTML]="pin.title"></div>\n\t\t\t\t\t<div class="abstract" *if="pin.abstract" [innerHTML]="pin.abstract"></div>\n\t\t\t\t</div>\n\t\t\t\t--\x3e\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="container-fluid" appear-stagger>\n\t\t\t<div class="logo" *if="item.logo"><img [src]="item.logo" /></div>\n\t\t\t<div class="title" *if="item.title" [innerHTML]="item.title"></div>\n\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t</div>\n\t'};var $a=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){},e}(t.Component);$a.meta={selector:"[view-text-right]",inputs:["item"],template:'\n\t\t<div class="background" *if="item.image">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="circle" [class]="{ dimmed: item.image }">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="container-fluid" [class]="{ \'negative\': item.image != null }" >\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<ul class="listing--values" appear-stagger *if="item.list && item.list.length">\n\t\t\t\t\t\t<li class="listing__item" *for="let listItem of item.list"><span [innerHTML]="listItem.title"></span></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6" appear-stagger>\n\t\t\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var Ra=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){},e}(t.Component);Ra.meta={selector:"[view-text-two-cols]",inputs:["item"],template:'\n\t\t<div class="background" *if="item.image">\n\t\t\t<img data-loading="lazy" [src]="item.image" ondragstart="return false;" />\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="circle" *if="!item.image">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="container-fluid" [class]="{ \'negative\': item.image != null }" >\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6" appear-stagger>\n\t\t\t\t\t<div class="title" [innerHTML]="item.title"></div>\n\t\t\t\t\t<div class="abstract" *if="item.abstract" [innerHTML]="item.abstract"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6" appear-stagger>\n\t\t\t\t\t<div class="description" *if="item.description" [innerHTML]="item.description"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var Ia=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){},e}(t.Component);Ia.meta={selector:"[view-welcome]",inputs:["item"],template:'\n\t\t\x3c!--\n\t\t<div class="circle">\n\t\t\t<img src="img/circle.png" />\n\t\t</div>\n\t\t--\x3e\n\t\t<div class="logo">\n\t\t\t<img src="img/logo-lg.png" />\n\t\t</div>\n\t'};var Oa=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e}(t.Module);Oa.meta={imports:[t.CoreModule],declarations:[Ht,ee,ne,Ft,ae,oe,ie,re,se,ue,le,ce,fe,Pa,za,La,$a,Ra,Ia],bootstrap:Dt},t.Browser.bootstrap(Oa)}));
//# sourceMappingURL=main.min.js.map